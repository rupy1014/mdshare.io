"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(editor)/editor/page",{

/***/ "(app-pages-browser)/./src/lib/ai-service.ts":
/*!*******************************!*\
  !*** ./src/lib/ai-service.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIService: () => (/* binding */ AIService),\n/* harmony export */   aiService: () => (/* binding */ aiService)\n/* harmony export */ });\nclass AIService {\n    // 자동 태그 생성 (Mock 구현)\n    async generateTags(content, title) {\n        // 실제로는 OpenAI API를 사용하지만, 여기서는 Mock 구현\n        const mockTags = [];\n        // 키워드 기반 태그 생성\n        const keywords = this.extractKeywords(content + ' ' + title);\n        keywords.forEach((keyword)=>{\n            const confidence = Math.random() * 0.4 + 0.6 // 0.6-1.0\n            ;\n            mockTags.push({\n                tag: keyword,\n                confidence,\n                reason: '문서에서 \"'.concat(keyword, '\" 키워드가 자주 사용됨')\n            });\n        });\n        // 카테고리 기반 태그 생성\n        const categories = this.detectCategories(content);\n        categories.forEach((category)=>{\n            mockTags.push({\n                tag: category,\n                confidence: Math.random() * 0.3 + 0.7,\n                reason: '문서 내용이 \"'.concat(category, '\" 카테고리에 해당함')\n            });\n        });\n        return mockTags.sort((a, b)=>b.confidence - a.confidence);\n    }\n    // 의미론적 검색 (Mock 구현)\n    async semanticSearch(query, documents) {\n        const results = [];\n        documents.forEach((doc)=>{\n            const relevanceScore = this.calculateRelevance(query, doc);\n            if (relevanceScore > 0.1) {\n                results.push({\n                    ...doc,\n                    relevanceScore,\n                    matchedTerms: this.findMatchedTerms(query, doc)\n                });\n            }\n        });\n        return results.sort((a, b)=>b.relevanceScore - a.relevanceScore);\n    }\n    // 문서 요약 생성\n    async generateSummary(content) {\n        // Mock 구현 - 실제로는 AI API 사용\n        const sentences = content.split(/[.!?]+/).filter((s)=>s.trim().length > 10);\n        const summary = sentences.slice(0, 2).join('. ');\n        return summary + (sentences.length > 2 ? '...' : '');\n    }\n    // 종합적인 문서 AI 분석\n    async analyzeDocument(document, allDocuments) {\n        const content = \"\".concat(document.title, \" \").concat(document.description);\n        // AI 친화도 평가\n        const aiFriendlinessScore = await this.evaluateAIFriendliness(document);\n        // 자동 태그 생성\n        const suggestedTags = await this.generateTags(content, document.title);\n        // 문서 관계 분석\n        const relationships = await this.analyzeDocumentRelationships(document, allDocuments);\n        // 주제 추출\n        const topics = await this.extractTopics(content);\n        // 감정 분석\n        const sentiment = await this.analyzeSentiment(content);\n        // 개선 제안 생성\n        const improvements = await this.generateImprovements(document, aiFriendlinessScore, suggestedTags);\n        return {\n            aiFriendlinessScore,\n            suggestedTags,\n            relationships,\n            improvements,\n            topics,\n            sentiment\n        };\n    }\n    // AI 친화도 평가\n    async evaluateAIFriendliness(document) {\n        var _document_metadata, _document_metadata1;\n        let score = 0;\n        // Frontmatter 완성도 (30점)\n        if ((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.author) score += 10;\n        if (document.tags && document.tags.length > 0) score += 10;\n        if (document.description && document.description.length > 10) score += 10;\n        // 구조화 수준 (30점)\n        if (document.title && document.title.length > 5) score += 15;\n        if (document.description && document.description.includes('.')) score += 15;\n        // 내용 명확성 (20점)\n        if (document.description && document.description.length > 50) score += 10;\n        if (((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.wordCount) && document.metadata.wordCount > 100) score += 10;\n        // 태그 및 관계 (20점)\n        if (document.tags && document.tags.length >= 3) score += 10;\n        if (document.tags && document.tags.length >= 5) score += 10;\n        return Math.min(score, 100);\n    }\n    // 주제 추출\n    async extractTopics(content) {\n        const topics = [];\n        const text = content.toLowerCase();\n        // 기술 주제\n        if (text.includes('react') || text.includes('nextjs')) topics.push('React/Next.js');\n        if (text.includes('typescript') || text.includes('javascript')) topics.push('JavaScript/TypeScript');\n        if (text.includes('api') || text.includes('rest')) topics.push('API 개발');\n        if (text.includes('database') || text.includes('db')) topics.push('데이터베이스');\n        if (text.includes('ai') || text.includes('machine learning')) topics.push('AI/ML');\n        // 도메인 주제\n        if (text.includes('설치') || text.includes('setup')) topics.push('환경 설정');\n        if (text.includes('배포') || text.includes('deploy')) topics.push('배포');\n        if (text.includes('테스트') || text.includes('test')) topics.push('테스팅');\n        if (text.includes('보안') || text.includes('security')) topics.push('보안');\n        if (text.includes('성능') || text.includes('performance')) topics.push('성능 최적화');\n        return topics.slice(0, 5) // 최대 5개 주제\n        ;\n    }\n    // 감정 분석\n    async analyzeSentiment(content) {\n        const text = content.toLowerCase();\n        const positiveWords = [\n            '좋다',\n            '훌륭',\n            '완벽',\n            '성공',\n            '효과적',\n            '쉽다',\n            '빠르다',\n            '안정적'\n        ];\n        const negativeWords = [\n            '문제',\n            '오류',\n            '실패',\n            '어렵다',\n            '느리다',\n            '불안정',\n            '복잡'\n        ];\n        const positiveCount = positiveWords.filter((word)=>text.includes(word)).length;\n        const negativeCount = negativeWords.filter((word)=>text.includes(word)).length;\n        if (positiveCount > negativeCount) return 'positive';\n        if (negativeCount > positiveCount) return 'negative';\n        return 'neutral';\n    }\n    // 개선 제안 생성\n    async generateImprovements(document, aiScore, suggestedTags) {\n        var _document_metadata;\n        const improvements = [];\n        if (aiScore < 70) {\n            var _document_metadata1;\n            if (!((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.author)) {\n                improvements.push('작성자 정보를 추가하여 신뢰성을 높이세요');\n            }\n            if (!document.tags || document.tags.length < 3) {\n                improvements.push('더 많은 태그를 추가하여 검색 가능성을 높이세요');\n            }\n            if (!document.description || document.description.length < 50) {\n                improvements.push('문서 설명을 더 자세히 작성하여 이해도를 높이세요');\n            }\n        }\n        if (suggestedTags.length > 0) {\n            improvements.push(\"\".concat(suggestedTags.length, \"개의 AI 추천 태그를 적용해보세요\"));\n        }\n        if (((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.wordCount) && document.metadata.wordCount < 100) {\n            improvements.push('문서 내용을 더 풍부하게 작성해보세요');\n        }\n        if (!document.description || !document.description.includes('.')) {\n            improvements.push('문서 설명에 완전한 문장을 사용해보세요');\n        }\n        return improvements.slice(0, 4) // 최대 4개 제안\n        ;\n    }\n    // 문서 관계 분석 (개별 문서용)\n    async analyzeDocumentRelationships(document, allDocuments) {\n        const relationships = [];\n        for (const otherDoc of allDocuments){\n            if (otherDoc.id === document.id) continue;\n            const similarity = this.calculateSimilarity(document, otherDoc);\n            if (similarity > 0.3) {\n                relationships.push({\n                    target: otherDoc.title,\n                    relationship: this.determineRelationship(document, otherDoc),\n                    strength: similarity\n                });\n            }\n        }\n        return relationships.slice(0, 3) // 최대 3개 관계만 표시\n        ;\n    }\n    // 문서 관계 분석 (전체 문서용)\n    async analyzeDocumentRelationships(documents) {\n        const relationships = [];\n        for(let i = 0; i < documents.length; i++){\n            for(let j = i + 1; j < documents.length; j++){\n                const doc1 = documents[i];\n                const doc2 = documents[j];\n                const similarity = this.calculateSimilarity(doc1, doc2);\n                if (similarity > 0.3) {\n                    relationships.push({\n                        source: doc1.title,\n                        target: doc2.title,\n                        relationship: this.determineRelationship(doc1, doc2),\n                        strength: similarity\n                    });\n                }\n            }\n        }\n        return relationships;\n    }\n    // 키워드 추출 (Mock)\n    extractKeywords(text) {\n        const words = text.toLowerCase().replace(/[^\\w\\s가-힣]/g, ' ').split(/\\s+/).filter((word)=>word.length > 2);\n        const wordCount = new Map();\n        words.forEach((word)=>{\n            wordCount.set(word, (wordCount.get(word) || 0) + 1);\n        });\n        return Array.from(wordCount.entries()).filter((param)=>{\n            let [_, count] = param;\n            return count > 1;\n        }).sort((param, param1)=>{\n            let [, a] = param, [, b] = param1;\n            return b - a;\n        }).slice(0, 5).map((param)=>{\n            let [word, _] = param;\n            return word;\n        });\n    }\n    // 카테고리 감지 (Mock)\n    detectCategories(content) {\n        const categories = [];\n        const text = content.toLowerCase();\n        if (text.includes('api') || text.includes('endpoint') || text.includes('rest')) {\n            categories.push('API');\n        }\n        if (text.includes('설치') || text.includes('setup') || text.includes('환경')) {\n            categories.push('설치');\n        }\n        if (text.includes('문서') || text.includes('documentation') || text.includes('가이드')) {\n            categories.push('문서');\n        }\n        if (text.includes('프로젝트') || text.includes('project') || text.includes('개요')) {\n            categories.push('프로젝트');\n        }\n        if (text.includes('개발') || text.includes('development') || text.includes('코드')) {\n            categories.push('개발');\n        }\n        return categories;\n    }\n    // 관련성 계산 (Mock)\n    calculateRelevance(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        let score = 0;\n        // 제목 매칭 (높은 가중치)\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term)) {\n                score += 0.4;\n            }\n            if (doc.description.toLowerCase().includes(term)) {\n                score += 0.2;\n            }\n            if (doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                score += 0.3;\n            }\n        });\n        return Math.min(score, 1.0);\n    }\n    // 매칭된 용어 찾기\n    findMatchedTerms(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        const matchedTerms = [];\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term) || doc.description.toLowerCase().includes(term) || doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                matchedTerms.push(term);\n            }\n        });\n        return matchedTerms;\n    }\n    // 문서 유사도 계산\n    calculateSimilarity(doc1, doc2) {\n        // 태그 유사도\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = new Set([\n            ...tags1\n        ].filter((tag)=>tags2.has(tag)));\n        const tagSimilarity = commonTags.size / Math.max(tags1.size, tags2.size);\n        // 제목 유사도 (간단한 문자열 유사도)\n        const titleSimilarity = this.stringSimilarity(doc1.title, doc2.title);\n        return tagSimilarity * 0.6 + titleSimilarity * 0.4;\n    }\n    // 문자열 유사도 계산 (간단한 구현)\n    stringSimilarity(str1, str2) {\n        const words1 = str1.toLowerCase().split(/\\s+/);\n        const words2 = str2.toLowerCase().split(/\\s+/);\n        const commonWords = words1.filter((word)=>words2.includes(word));\n        return commonWords.length / Math.max(words1.length, words2.length);\n    }\n    // 관계 유형 결정\n    determineRelationship(doc1, doc2) {\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = [\n            ...tags1\n        ].filter((tag)=>tags2.has(tag));\n        if (commonTags.includes('API') && commonTags.includes('문서')) {\n            return 'API 문서 관계';\n        }\n        if (commonTags.includes('설치') && commonTags.includes('개발')) {\n            return '개발 환경 관계';\n        }\n        if (commonTags.includes('프로젝트') && commonTags.includes('문서')) {\n            return '프로젝트 문서 관계';\n        }\n        return '관련 문서';\n    }\n    constructor(apiKey){\n        this.apiKey = null;\n        this.apiKey = apiKey || null;\n    }\n}\n// 싱글톤 인스턴스\nconst aiService = new AIService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYWktc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQTBCTyxNQUFNQTtJQU9YLHFCQUFxQjtJQUNyQixNQUFNQyxhQUFhQyxPQUFlLEVBQUVDLEtBQWEsRUFBOEI7UUFDN0UsdUNBQXVDO1FBQ3ZDLE1BQU1DLFdBQThCLEVBQUU7UUFFdEMsZUFBZTtRQUNmLE1BQU1DLFdBQVcsSUFBSSxDQUFDQyxlQUFlLENBQUNKLFVBQVUsTUFBTUM7UUFFdERFLFNBQVNFLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDZixNQUFNQyxhQUFhQyxLQUFLQyxNQUFNLEtBQUssTUFBTSxJQUFJLFVBQVU7O1lBQ3ZEUCxTQUFTUSxJQUFJLENBQUM7Z0JBQ1pDLEtBQUtMO2dCQUNMQztnQkFDQUssUUFBUSxTQUFpQixPQUFSTixTQUFRO1lBQzNCO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTU8sYUFBYSxJQUFJLENBQUNDLGdCQUFnQixDQUFDZDtRQUN6Q2EsV0FBV1IsT0FBTyxDQUFDVSxDQUFBQTtZQUNqQmIsU0FBU1EsSUFBSSxDQUFDO2dCQUNaQyxLQUFLSTtnQkFDTFIsWUFBWUMsS0FBS0MsTUFBTSxLQUFLLE1BQU07Z0JBQ2xDRyxRQUFRLFdBQW9CLE9BQVRHLFVBQVM7WUFDOUI7UUFDRjtRQUVBLE9BQU9iLFNBQVNjLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFWCxVQUFVLEdBQUdVLEVBQUVWLFVBQVU7SUFDNUQ7SUFFQSxvQkFBb0I7SUFDcEIsTUFBTVksZUFBZUMsS0FBYSxFQUFFQyxTQUF5QixFQUE2QjtRQUN4RixNQUFNQyxVQUE0QixFQUFFO1FBRXBDRCxVQUFVaEIsT0FBTyxDQUFDa0IsQ0FBQUE7WUFDaEIsTUFBTUMsaUJBQWlCLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNMLE9BQU9HO1lBQ3RELElBQUlDLGlCQUFpQixLQUFLO2dCQUN4QkYsUUFBUVosSUFBSSxDQUFDO29CQUNYLEdBQUdhLEdBQUc7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RUEsT0FBTztJQUNUO0lBalhBcUQsWUFBWUMsTUFBZSxDQUFFO2FBRnJCQSxTQUF3QjtRQUc5QixJQUFJLENBQUNBLE1BQU0sR0FBR0EsVUFBVTtJQUMxQjtBQWdYRjtBQUVBLFdBQVc7QUFDSixNQUFNQyxZQUFZLElBQUlsSCxZQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvYWktc2VydmljZS50cz9mZGU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgRG9jdW1lbnRJbmZvIH0gZnJvbSAnbWRzaGFyZS1jb3JlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIEFJVGFnU3VnZ2VzdGlvbiB7XG4gIHRhZzogc3RyaW5nXG4gIGNvbmZpZGVuY2U6IG51bWJlclxuICByZWFzb246IHN0cmluZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50QUlBbmFseXNpcyB7XG4gIGFpRnJpZW5kbGluZXNzU2NvcmU6IG51bWJlclxuICBzdWdnZXN0ZWRUYWdzOiBBSVRhZ1N1Z2dlc3Rpb25bXVxuICByZWxhdGlvbnNoaXBzOiBBcnJheTx7XG4gICAgdGFyZ2V0OiBzdHJpbmdcbiAgICByZWxhdGlvbnNoaXA6IHN0cmluZ1xuICAgIHN0cmVuZ3RoOiBudW1iZXJcbiAgfT5cbiAgaW1wcm92ZW1lbnRzOiBzdHJpbmdbXVxuICB0b3BpY3M6IHN0cmluZ1tdXG4gIHNlbnRpbWVudDogJ3Bvc2l0aXZlJyB8ICduZXV0cmFsJyB8ICduZWdhdGl2ZSdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBSVNlYXJjaFJlc3VsdCBleHRlbmRzIERvY3VtZW50SW5mbyB7XG4gIHJlbGV2YW5jZVNjb3JlOiBudW1iZXJcbiAgbWF0Y2hlZFRlcm1zOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgY2xhc3MgQUlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBhcGlLZXk6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cbiAgY29uc3RydWN0b3IoYXBpS2V5Pzogc3RyaW5nKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXkgfHwgbnVsbFxuICB9XG5cbiAgLy8g7J6Q64+ZIO2DnOq3uCDsg53shLEgKE1vY2sg6rWs7ZiEKVxuICBhc3luYyBnZW5lcmF0ZVRhZ3MoY29udGVudDogc3RyaW5nLCB0aXRsZTogc3RyaW5nKTogUHJvbWlzZTxBSVRhZ1N1Z2dlc3Rpb25bXT4ge1xuICAgIC8vIOyLpOygnOuhnOuKlCBPcGVuQUkgQVBJ66W8IOyCrOyaqe2VmOyngOunjCwg7Jes6riw7ISc64qUIE1vY2sg6rWs7ZiEXG4gICAgY29uc3QgbW9ja1RhZ3M6IEFJVGFnU3VnZ2VzdGlvbltdID0gW11cblxuICAgIC8vIO2CpOybjOuTnCDquLDrsJgg7YOc6re4IOyDneyEsVxuICAgIGNvbnN0IGtleXdvcmRzID0gdGhpcy5leHRyYWN0S2V5d29yZHMoY29udGVudCArICcgJyArIHRpdGxlKVxuICAgIFxuICAgIGtleXdvcmRzLmZvckVhY2goa2V5d29yZCA9PiB7XG4gICAgICBjb25zdCBjb25maWRlbmNlID0gTWF0aC5yYW5kb20oKSAqIDAuNCArIDAuNiAvLyAwLjYtMS4wXG4gICAgICBtb2NrVGFncy5wdXNoKHtcbiAgICAgICAgdGFnOiBrZXl3b3JkLFxuICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICByZWFzb246IGDrrLjshJzsl5DshJwgXCIke2tleXdvcmR9XCIg7YKk7JuM65Oc6rCAIOyekOyjvCDsgqzsmqnrkKhgXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyDsubTthYzqs6Drpqwg6riw67CYIO2DnOq3uCDsg53shLFcbiAgICBjb25zdCBjYXRlZ29yaWVzID0gdGhpcy5kZXRlY3RDYXRlZ29yaWVzKGNvbnRlbnQpXG4gICAgY2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IHtcbiAgICAgIG1vY2tUYWdzLnB1c2goe1xuICAgICAgICB0YWc6IGNhdGVnb3J5LFxuICAgICAgICBjb25maWRlbmNlOiBNYXRoLnJhbmRvbSgpICogMC4zICsgMC43LFxuICAgICAgICByZWFzb246IGDrrLjshJwg64K07Jqp7J20IFwiJHtjYXRlZ29yeX1cIiDsubTthYzqs6Drpqzsl5Ag7ZW064u57ZWoYFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIG1vY2tUYWdzLnNvcnQoKGEsIGIpID0+IGIuY29uZmlkZW5jZSAtIGEuY29uZmlkZW5jZSlcbiAgfVxuXG4gIC8vIOydmOuvuOuhoOyggSDqsoDsg4kgKE1vY2sg6rWs7ZiEKVxuICBhc3luYyBzZW1hbnRpY1NlYXJjaChxdWVyeTogc3RyaW5nLCBkb2N1bWVudHM6IERvY3VtZW50SW5mb1tdKTogUHJvbWlzZTxBSVNlYXJjaFJlc3VsdFtdPiB7XG4gICAgY29uc3QgcmVzdWx0czogQUlTZWFyY2hSZXN1bHRbXSA9IFtdXG5cbiAgICBkb2N1bWVudHMuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgY29uc3QgcmVsZXZhbmNlU2NvcmUgPSB0aGlzLmNhbGN1bGF0ZVJlbGV2YW5jZShxdWVyeSwgZG9jKVxuICAgICAgaWYgKHJlbGV2YW5jZVNjb3JlID4gMC4xKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgLi4uZG9jLFxuICAgICAgICAgIHJlbGV2YW5jZVNjb3JlLFxuICAgICAgICAgIG1hdGNoZWRUZXJtczogdGhpcy5maW5kTWF0Y2hlZFRlcm1zKHF1ZXJ5LCBkb2MpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGIucmVsZXZhbmNlU2NvcmUgLSBhLnJlbGV2YW5jZVNjb3JlKVxuICB9XG5cbiAgLy8g66y47IScIOyalOyVvSDsg53shLFcbiAgYXN5bmMgZ2VuZXJhdGVTdW1tYXJ5KGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gTW9jayDqtaztmIQgLSDsi6TsoJzroZzripQgQUkgQVBJIOyCrOyaqVxuICAgIGNvbnN0IHNlbnRlbmNlcyA9IGNvbnRlbnQuc3BsaXQoL1suIT9dKy8pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDEwKVxuICAgIGNvbnN0IHN1bW1hcnkgPSBzZW50ZW5jZXMuc2xpY2UoMCwgMikuam9pbignLiAnKVxuICAgIHJldHVybiBzdW1tYXJ5ICsgKHNlbnRlbmNlcy5sZW5ndGggPiAyID8gJy4uLicgOiAnJylcbiAgfVxuXG4gIC8vIOyihe2VqeyggeyduCDrrLjshJwgQUkg67aE7ISdXG4gIGFzeW5jIGFuYWx5emVEb2N1bWVudChkb2N1bWVudDogRG9jdW1lbnRJbmZvLCBhbGxEb2N1bWVudHM6IERvY3VtZW50SW5mb1tdKTogUHJvbWlzZTxEb2N1bWVudEFJQW5hbHlzaXM+IHtcbiAgICBjb25zdCBjb250ZW50ID0gYCR7ZG9jdW1lbnQudGl0bGV9ICR7ZG9jdW1lbnQuZGVzY3JpcHRpb259YFxuICAgIFxuICAgIC8vIEFJIOy5nO2ZlOuPhCDtj4nqsIBcbiAgICBjb25zdCBhaUZyaWVuZGxpbmVzc1Njb3JlID0gYXdhaXQgdGhpcy5ldmFsdWF0ZUFJRnJpZW5kbGluZXNzKGRvY3VtZW50KVxuICAgIFxuICAgIC8vIOyekOuPmSDtg5zqt7gg7IOd7ISxXG4gICAgY29uc3Qgc3VnZ2VzdGVkVGFncyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVUYWdzKGNvbnRlbnQsIGRvY3VtZW50LnRpdGxlKVxuICAgIFxuICAgIC8vIOusuOyEnCDqtIDqs4Qg67aE7ISdXG4gICAgY29uc3QgcmVsYXRpb25zaGlwcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZURvY3VtZW50UmVsYXRpb25zaGlwcyhkb2N1bWVudCwgYWxsRG9jdW1lbnRzKVxuICAgIFxuICAgIC8vIOyjvOygnCDstpTstpxcbiAgICBjb25zdCB0b3BpY3MgPSBhd2FpdCB0aGlzLmV4dHJhY3RUb3BpY3MoY29udGVudClcbiAgICBcbiAgICAvLyDqsJDsoJUg67aE7ISdXG4gICAgY29uc3Qgc2VudGltZW50ID0gYXdhaXQgdGhpcy5hbmFseXplU2VudGltZW50KGNvbnRlbnQpXG4gICAgXG4gICAgLy8g6rCc7ISgIOygnOyViCDsg53shLFcbiAgICBjb25zdCBpbXByb3ZlbWVudHMgPSBhd2FpdCB0aGlzLmdlbmVyYXRlSW1wcm92ZW1lbnRzKGRvY3VtZW50LCBhaUZyaWVuZGxpbmVzc1Njb3JlLCBzdWdnZXN0ZWRUYWdzKVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhaUZyaWVuZGxpbmVzc1Njb3JlLFxuICAgICAgc3VnZ2VzdGVkVGFncyxcbiAgICAgIHJlbGF0aW9uc2hpcHMsXG4gICAgICBpbXByb3ZlbWVudHMsXG4gICAgICB0b3BpY3MsXG4gICAgICBzZW50aW1lbnRcbiAgICB9XG4gIH1cblxuICAvLyBBSSDsuZztmZTrj4Qg7Y+J6rCAXG4gIGFzeW5jIGV2YWx1YXRlQUlGcmllbmRsaW5lc3MoZG9jdW1lbnQ6IERvY3VtZW50SW5mbyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgbGV0IHNjb3JlID0gMFxuXG4gICAgLy8gRnJvbnRtYXR0ZXIg7JmE7ISx64+EICgzMOygkClcbiAgICBpZiAoZG9jdW1lbnQubWV0YWRhdGE/LmF1dGhvcikgc2NvcmUgKz0gMTBcbiAgICBpZiAoZG9jdW1lbnQudGFncyAmJiBkb2N1bWVudC50YWdzLmxlbmd0aCA+IDApIHNjb3JlICs9IDEwXG4gICAgaWYgKGRvY3VtZW50LmRlc2NyaXB0aW9uICYmIGRvY3VtZW50LmRlc2NyaXB0aW9uLmxlbmd0aCA+IDEwKSBzY29yZSArPSAxMFxuXG4gICAgLy8g6rWs7KGw7ZmUIOyImOykgCAoMzDsoJApXG4gICAgaWYgKGRvY3VtZW50LnRpdGxlICYmIGRvY3VtZW50LnRpdGxlLmxlbmd0aCA+IDUpIHNjb3JlICs9IDE1XG4gICAgaWYgKGRvY3VtZW50LmRlc2NyaXB0aW9uICYmIGRvY3VtZW50LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCcuJykpIHNjb3JlICs9IDE1XG5cbiAgICAvLyDrgrTsmqkg66qF7ZmV7ISxICgyMOygkClcbiAgICBpZiAoZG9jdW1lbnQuZGVzY3JpcHRpb24gJiYgZG9jdW1lbnQuZGVzY3JpcHRpb24ubGVuZ3RoID4gNTApIHNjb3JlICs9IDEwXG4gICAgaWYgKGRvY3VtZW50Lm1ldGFkYXRhPy53b3JkQ291bnQgJiYgZG9jdW1lbnQubWV0YWRhdGEud29yZENvdW50ID4gMTAwKSBzY29yZSArPSAxMFxuXG4gICAgLy8g7YOc6re4IOuwjyDqtIDqs4QgKDIw7KCQKVxuICAgIGlmIChkb2N1bWVudC50YWdzICYmIGRvY3VtZW50LnRhZ3MubGVuZ3RoID49IDMpIHNjb3JlICs9IDEwXG4gICAgaWYgKGRvY3VtZW50LnRhZ3MgJiYgZG9jdW1lbnQudGFncy5sZW5ndGggPj0gNSkgc2NvcmUgKz0gMTBcblxuICAgIHJldHVybiBNYXRoLm1pbihzY29yZSwgMTAwKVxuICB9XG5cbiAgLy8g7KO87KCcIOy2lOy2nFxuICBhc3luYyBleHRyYWN0VG9waWNzKGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCB0b3BpY3M6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCB0ZXh0ID0gY29udGVudC50b0xvd2VyQ2FzZSgpXG5cbiAgICAvLyDquLDsiKAg7KO87KCcXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ3JlYWN0JykgfHwgdGV4dC5pbmNsdWRlcygnbmV4dGpzJykpIHRvcGljcy5wdXNoKCdSZWFjdC9OZXh0LmpzJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygndHlwZXNjcmlwdCcpIHx8IHRleHQuaW5jbHVkZXMoJ2phdmFzY3JpcHQnKSkgdG9waWNzLnB1c2goJ0phdmFTY3JpcHQvVHlwZVNjcmlwdCcpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ2FwaScpIHx8IHRleHQuaW5jbHVkZXMoJ3Jlc3QnKSkgdG9waWNzLnB1c2goJ0FQSSDqsJzrsJwnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdkYXRhYmFzZScpIHx8IHRleHQuaW5jbHVkZXMoJ2RiJykpIHRvcGljcy5wdXNoKCfrjbDsnbTthLDrsqDsnbTsiqQnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdhaScpIHx8IHRleHQuaW5jbHVkZXMoJ21hY2hpbmUgbGVhcm5pbmcnKSkgdG9waWNzLnB1c2goJ0FJL01MJylcbiAgICBcbiAgICAvLyDrj4TrqZTsnbgg7KO87KCcXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+yEpOy5mCcpIHx8IHRleHQuaW5jbHVkZXMoJ3NldHVwJykpIHRvcGljcy5wdXNoKCftmZjqsr0g7ISk7KCVJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygn67Cw7Y+sJykgfHwgdGV4dC5pbmNsdWRlcygnZGVwbG95JykpIHRvcGljcy5wdXNoKCfrsLDtj6wnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfthYzsiqTtirgnKSB8fCB0ZXh0LmluY2x1ZGVzKCd0ZXN0JykpIHRvcGljcy5wdXNoKCfthYzsiqTtjIUnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfrs7TslYgnKSB8fCB0ZXh0LmluY2x1ZGVzKCdzZWN1cml0eScpKSB0b3BpY3MucHVzaCgn67O07JWIJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygn7ISx64qlJykgfHwgdGV4dC5pbmNsdWRlcygncGVyZm9ybWFuY2UnKSkgdG9waWNzLnB1c2goJ+yEseuKpSDstZzsoIHtmZQnKVxuXG4gICAgcmV0dXJuIHRvcGljcy5zbGljZSgwLCA1KSAvLyDstZzrjIAgNeqwnCDso7zsoJxcbiAgfVxuXG4gIC8vIOqwkOyglSDrtoTshJ1cbiAgYXN5bmMgYW5hbHl6ZVNlbnRpbWVudChjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPCdwb3NpdGl2ZScgfCAnbmV1dHJhbCcgfCAnbmVnYXRpdmUnPiB7XG4gICAgY29uc3QgdGV4dCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIGNvbnN0IHBvc2l0aXZlV29yZHMgPSBbJ+yii+uLpCcsICftm4zrpa0nLCAn7JmE67K9JywgJ+yEseqztScsICftmqjqs7zsoIEnLCAn7Im964ukJywgJ+u5oOultOuLpCcsICfslYjsoJXsoIEnXVxuICAgIGNvbnN0IG5lZ2F0aXZlV29yZHMgPSBbJ+usuOygnCcsICfsmKTrpZgnLCAn7Iuk7YyoJywgJ+yWtOugteuLpCcsICfripDrpqzri6QnLCAn67aI7JWI7KCVJywgJ+uzteyeoSddXG4gICAgXG4gICAgY29uc3QgcG9zaXRpdmVDb3VudCA9IHBvc2l0aXZlV29yZHMuZmlsdGVyKHdvcmQgPT4gdGV4dC5pbmNsdWRlcyh3b3JkKSkubGVuZ3RoXG4gICAgY29uc3QgbmVnYXRpdmVDb3VudCA9IG5lZ2F0aXZlV29yZHMuZmlsdGVyKHdvcmQgPT4gdGV4dC5pbmNsdWRlcyh3b3JkKSkubGVuZ3RoXG4gICAgXG4gICAgaWYgKHBvc2l0aXZlQ291bnQgPiBuZWdhdGl2ZUNvdW50KSByZXR1cm4gJ3Bvc2l0aXZlJ1xuICAgIGlmIChuZWdhdGl2ZUNvdW50ID4gcG9zaXRpdmVDb3VudCkgcmV0dXJuICduZWdhdGl2ZSdcbiAgICByZXR1cm4gJ25ldXRyYWwnXG4gIH1cblxuICAvLyDqsJzshKAg7KCc7JWIIOyDneyEsVxuICBhc3luYyBnZW5lcmF0ZUltcHJvdmVtZW50cyhcbiAgICBkb2N1bWVudDogRG9jdW1lbnRJbmZvLCBcbiAgICBhaVNjb3JlOiBudW1iZXIsIFxuICAgIHN1Z2dlc3RlZFRhZ3M6IEFJVGFnU3VnZ2VzdGlvbltdXG4gICk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBjb25zdCBpbXByb3ZlbWVudHM6IHN0cmluZ1tdID0gW11cblxuICAgIGlmIChhaVNjb3JlIDwgNzApIHtcbiAgICAgIGlmICghZG9jdW1lbnQubWV0YWRhdGE/LmF1dGhvcikge1xuICAgICAgICBpbXByb3ZlbWVudHMucHVzaCgn7J6R7ISx7J6QIOygleuztOulvCDstpTqsIDtlZjsl6wg7Iug66Kw7ISx7J2EIOuGkuydtOyEuOyalCcpXG4gICAgICB9XG4gICAgICBpZiAoIWRvY3VtZW50LnRhZ3MgfHwgZG9jdW1lbnQudGFncy5sZW5ndGggPCAzKSB7XG4gICAgICAgIGltcHJvdmVtZW50cy5wdXNoKCfrjZQg66eO7J2AIO2DnOq3uOulvCDstpTqsIDtlZjsl6wg6rKA7IOJIOqwgOuKpeyEseydhCDrhpLsnbTshLjsmpQnKVxuICAgICAgfVxuICAgICAgaWYgKCFkb2N1bWVudC5kZXNjcmlwdGlvbiB8fCBkb2N1bWVudC5kZXNjcmlwdGlvbi5sZW5ndGggPCA1MCkge1xuICAgICAgICBpbXByb3ZlbWVudHMucHVzaCgn66y47IScIOyEpOuqheydhCDrjZQg7J6Q7IS47Z6IIOyekeyEse2VmOyXrCDsnbTtlbTrj4Trpbwg64aS7J207IS47JqUJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VnZ2VzdGVkVGFncy5sZW5ndGggPiAwKSB7XG4gICAgICBpbXByb3ZlbWVudHMucHVzaChgJHtzdWdnZXN0ZWRUYWdzLmxlbmd0aH3qsJzsnZggQUkg7LaU7LKcIO2DnOq3uOulvCDsoIHsmqntlbTrs7TshLjsmpRgKVxuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5tZXRhZGF0YT8ud29yZENvdW50ICYmIGRvY3VtZW50Lm1ldGFkYXRhLndvcmRDb3VudCA8IDEwMCkge1xuICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ+usuOyEnCDrgrTsmqnsnYQg642UIO2Sjeu2gO2VmOqyjCDsnpHshLHtlbTrs7TshLjsmpQnKVxuICAgIH1cblxuICAgIGlmICghZG9jdW1lbnQuZGVzY3JpcHRpb24gfHwgIWRvY3VtZW50LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGltcHJvdmVtZW50cy5wdXNoKCfrrLjshJwg7ISk66qF7JeQIOyZhOyghO2VnCDrrLjsnqXsnYQg7IKs7Jqp7ZW067O07IS47JqUJylcbiAgICB9XG5cbiAgICByZXR1cm4gaW1wcm92ZW1lbnRzLnNsaWNlKDAsIDQpIC8vIOy1nOuMgCA06rCcIOygnOyViFxuICB9XG5cbiAgLy8g66y47IScIOq0gOqzhCDrtoTshJ0gKOqwnOuzhCDrrLjshJzsmqkpXG4gIGFzeW5jIGFuYWx5emVEb2N1bWVudFJlbGF0aW9uc2hpcHMoZG9jdW1lbnQ6IERvY3VtZW50SW5mbywgYWxsRG9jdW1lbnRzOiBEb2N1bWVudEluZm9bXSk6IFByb21pc2U8QXJyYXk8e1xuICAgIHRhcmdldDogc3RyaW5nXG4gICAgcmVsYXRpb25zaGlwOiBzdHJpbmdcbiAgICBzdHJlbmd0aDogbnVtYmVyXG4gIH0+PiB7XG4gICAgY29uc3QgcmVsYXRpb25zaGlwczogQXJyYXk8e1xuICAgICAgdGFyZ2V0OiBzdHJpbmdcbiAgICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gICAgICBzdHJlbmd0aDogbnVtYmVyXG4gICAgfT4gPSBbXVxuXG4gICAgZm9yIChjb25zdCBvdGhlckRvYyBvZiBhbGxEb2N1bWVudHMpIHtcbiAgICAgIGlmIChvdGhlckRvYy5pZCA9PT0gZG9jdW1lbnQuaWQpIGNvbnRpbnVlXG5cbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoZG9jdW1lbnQsIG90aGVyRG9jKVxuICAgICAgaWYgKHNpbWlsYXJpdHkgPiAwLjMpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwcy5wdXNoKHtcbiAgICAgICAgICB0YXJnZXQ6IG90aGVyRG9jLnRpdGxlLFxuICAgICAgICAgIHJlbGF0aW9uc2hpcDogdGhpcy5kZXRlcm1pbmVSZWxhdGlvbnNoaXAoZG9jdW1lbnQsIG90aGVyRG9jKSxcbiAgICAgICAgICBzdHJlbmd0aDogc2ltaWxhcml0eVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZWxhdGlvbnNoaXBzLnNsaWNlKDAsIDMpIC8vIOy1nOuMgCAz6rCcIOq0gOqzhOunjCDtkZzsi5xcbiAgfVxuXG4gIC8vIOusuOyEnCDqtIDqs4Qg67aE7ISdICjsoITssrQg66y47ISc7JqpKVxuICBhc3luYyBhbmFseXplRG9jdW1lbnRSZWxhdGlvbnNoaXBzKGRvY3VtZW50czogRG9jdW1lbnRJbmZvW10pOiBQcm9taXNlPEFycmF5PHtcbiAgICBzb3VyY2U6IHN0cmluZ1xuICAgIHRhcmdldDogc3RyaW5nXG4gICAgcmVsYXRpb25zaGlwOiBzdHJpbmdcbiAgICBzdHJlbmd0aDogbnVtYmVyXG4gIH0+PiB7XG4gICAgY29uc3QgcmVsYXRpb25zaGlwczogQXJyYXk8e1xuICAgICAgc291cmNlOiBzdHJpbmdcbiAgICAgIHRhcmdldDogc3RyaW5nXG4gICAgICByZWxhdGlvbnNoaXA6IHN0cmluZ1xuICAgICAgc3RyZW5ndGg6IG51bWJlclxuICAgIH0+ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBkb2N1bWVudHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgY29uc3QgZG9jMSA9IGRvY3VtZW50c1tpXVxuICAgICAgICBjb25zdCBkb2MyID0gZG9jdW1lbnRzW2pdXG4gICAgICAgIFxuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVTaW1pbGFyaXR5KGRvYzEsIGRvYzIpXG4gICAgICAgIGlmIChzaW1pbGFyaXR5ID4gMC4zKSB7XG4gICAgICAgICAgcmVsYXRpb25zaGlwcy5wdXNoKHtcbiAgICAgICAgICAgIHNvdXJjZTogZG9jMS50aXRsZSxcbiAgICAgICAgICAgIHRhcmdldDogZG9jMi50aXRsZSxcbiAgICAgICAgICAgIHJlbGF0aW9uc2hpcDogdGhpcy5kZXRlcm1pbmVSZWxhdGlvbnNoaXAoZG9jMSwgZG9jMiksXG4gICAgICAgICAgICBzdHJlbmd0aDogc2ltaWxhcml0eVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVsYXRpb25zaGlwc1xuICB9XG5cbiAgLy8g7YKk7JuM65OcIOy2lOy2nCAoTW9jaylcbiAgcHJpdmF0ZSBleHRyYWN0S2V5d29yZHModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50b0xvd2VyQ2FzZSgpXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHPqsIAt7Z6jXS9nLCAnICcpXG4gICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMilcblxuICAgIGNvbnN0IHdvcmRDb3VudCA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KClcbiAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgd29yZENvdW50LnNldCh3b3JkLCAod29yZENvdW50LmdldCh3b3JkKSB8fCAwKSArIDEpXG4gICAgfSlcblxuICAgIHJldHVybiBBcnJheS5mcm9tKHdvcmRDb3VudC5lbnRyaWVzKCkpXG4gICAgICAuZmlsdGVyKChbXywgY291bnRdKSA9PiBjb3VudCA+IDEpXG4gICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcbiAgICAgIC5zbGljZSgwLCA1KVxuICAgICAgLm1hcCgoW3dvcmQsIF9dKSA9PiB3b3JkKVxuICB9XG5cbiAgLy8g7Lm07YWM6rOg66asIOqwkOyngCAoTW9jaylcbiAgcHJpdmF0ZSBkZXRlY3RDYXRlZ29yaWVzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBjYXRlZ29yaWVzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgdGV4dCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKVxuXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ2FwaScpIHx8IHRleHQuaW5jbHVkZXMoJ2VuZHBvaW50JykgfHwgdGV4dC5pbmNsdWRlcygncmVzdCcpKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goJ0FQSScpXG4gICAgfVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfshKTsuZgnKSB8fCB0ZXh0LmluY2x1ZGVzKCdzZXR1cCcpIHx8IHRleHQuaW5jbHVkZXMoJ+2ZmOqyvScpKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goJ+yEpOy5mCcpXG4gICAgfVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfrrLjshJwnKSB8fCB0ZXh0LmluY2x1ZGVzKCdkb2N1bWVudGF0aW9uJykgfHwgdGV4dC5pbmNsdWRlcygn6rCA7J2065OcJykpIHtcbiAgICAgIGNhdGVnb3JpZXMucHVzaCgn66y47IScJylcbiAgICB9XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+2UhOuhnOygne2KuCcpIHx8IHRleHQuaW5jbHVkZXMoJ3Byb2plY3QnKSB8fCB0ZXh0LmluY2x1ZGVzKCfqsJzsmpQnKSkge1xuICAgICAgY2F0ZWdvcmllcy5wdXNoKCftlITroZzsoJ3tirgnKVxuICAgIH1cbiAgICBpZiAodGV4dC5pbmNsdWRlcygn6rCc67CcJykgfHwgdGV4dC5pbmNsdWRlcygnZGV2ZWxvcG1lbnQnKSB8fCB0ZXh0LmluY2x1ZGVzKCfsvZTrk5wnKSkge1xuICAgICAgY2F0ZWdvcmllcy5wdXNoKCfqsJzrsJwnKVxuICAgIH1cblxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cblxuICAvLyDqtIDroKjshLEg6rOE7IKwIChNb2NrKVxuICBwcml2YXRlIGNhbGN1bGF0ZVJlbGV2YW5jZShxdWVyeTogc3RyaW5nLCBkb2M6IERvY3VtZW50SW5mbyk6IG51bWJlciB7XG4gICAgY29uc3QgcXVlcnlUZXJtcyA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKVxuICAgIGxldCBzY29yZSA9IDBcblxuICAgIC8vIOygnOuqqSDrp6Tsua0gKOuGkuydgCDqsIDspJHsuZgpXG4gICAgcXVlcnlUZXJtcy5mb3JFYWNoKHRlcm0gPT4ge1xuICAgICAgaWYgKGRvYy50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pKSB7XG4gICAgICAgIHNjb3JlICs9IDAuNFxuICAgICAgfVxuICAgICAgaWYgKGRvYy5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pKSB7XG4gICAgICAgIHNjb3JlICs9IDAuMlxuICAgICAgfVxuICAgICAgaWYgKGRvYy50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pKSkge1xuICAgICAgICBzY29yZSArPSAwLjNcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIE1hdGgubWluKHNjb3JlLCAxLjApXG4gIH1cblxuICAvLyDrp6Tsua3rkJwg7Jqp7Ja0IOywvuq4sFxuICBwcml2YXRlIGZpbmRNYXRjaGVkVGVybXMocXVlcnk6IHN0cmluZywgZG9jOiBEb2N1bWVudEluZm8pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcXVlcnlUZXJtcyA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKVxuICAgIGNvbnN0IG1hdGNoZWRUZXJtczogc3RyaW5nW10gPSBbXVxuXG4gICAgcXVlcnlUZXJtcy5mb3JFYWNoKHRlcm0gPT4ge1xuICAgICAgaWYgKGRvYy50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pIHx8XG4gICAgICAgICAgZG9jLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkgfHxcbiAgICAgICAgICBkb2MudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSkpIHtcbiAgICAgICAgbWF0Y2hlZFRlcm1zLnB1c2godGVybSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG1hdGNoZWRUZXJtc1xuICB9XG5cbiAgLy8g66y47IScIOycoOyCrOuPhCDqs4TsgrBcbiAgcHJpdmF0ZSBjYWxjdWxhdGVTaW1pbGFyaXR5KGRvYzE6IERvY3VtZW50SW5mbywgZG9jMjogRG9jdW1lbnRJbmZvKTogbnVtYmVyIHtcbiAgICAvLyDtg5zqt7gg7Jyg7IKs64+EXG4gICAgY29uc3QgdGFnczEgPSBuZXcgU2V0KGRvYzEudGFncylcbiAgICBjb25zdCB0YWdzMiA9IG5ldyBTZXQoZG9jMi50YWdzKVxuICAgIGNvbnN0IGNvbW1vblRhZ3MgPSBuZXcgU2V0KFsuLi50YWdzMV0uZmlsdGVyKHRhZyA9PiB0YWdzMi5oYXModGFnKSkpXG4gICAgY29uc3QgdGFnU2ltaWxhcml0eSA9IGNvbW1vblRhZ3Muc2l6ZSAvIE1hdGgubWF4KHRhZ3MxLnNpemUsIHRhZ3MyLnNpemUpXG5cbiAgICAvLyDsoJzrqqkg7Jyg7IKs64+EICjqsITri6jtlZwg66y47J6Q7Je0IOycoOyCrOuPhClcbiAgICBjb25zdCB0aXRsZVNpbWlsYXJpdHkgPSB0aGlzLnN0cmluZ1NpbWlsYXJpdHkoZG9jMS50aXRsZSwgZG9jMi50aXRsZSlcblxuICAgIHJldHVybiAodGFnU2ltaWxhcml0eSAqIDAuNiArIHRpdGxlU2ltaWxhcml0eSAqIDAuNClcbiAgfVxuXG4gIC8vIOusuOyekOyXtCDsnKDsgqzrj4Qg6rOE7IKwICjqsITri6jtlZwg6rWs7ZiEKVxuICBwcml2YXRlIHN0cmluZ1NpbWlsYXJpdHkoc3RyMTogc3RyaW5nLCBzdHIyOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IHdvcmRzMSA9IHN0cjEudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzKy8pXG4gICAgY29uc3Qgd29yZHMyID0gc3RyMi50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLylcbiAgICBjb25zdCBjb21tb25Xb3JkcyA9IHdvcmRzMS5maWx0ZXIod29yZCA9PiB3b3JkczIuaW5jbHVkZXMod29yZCkpXG4gICAgcmV0dXJuIGNvbW1vbldvcmRzLmxlbmd0aCAvIE1hdGgubWF4KHdvcmRzMS5sZW5ndGgsIHdvcmRzMi5sZW5ndGgpXG4gIH1cblxuICAvLyDqtIDqs4Qg7Jyg7ZiVIOqysOyglVxuICBwcml2YXRlIGRldGVybWluZVJlbGF0aW9uc2hpcChkb2MxOiBEb2N1bWVudEluZm8sIGRvYzI6IERvY3VtZW50SW5mbyk6IHN0cmluZyB7XG4gICAgY29uc3QgdGFnczEgPSBuZXcgU2V0KGRvYzEudGFncylcbiAgICBjb25zdCB0YWdzMiA9IG5ldyBTZXQoZG9jMi50YWdzKVxuICAgIGNvbnN0IGNvbW1vblRhZ3MgPSBbLi4udGFnczFdLmZpbHRlcih0YWcgPT4gdGFnczIuaGFzKHRhZykpXG5cbiAgICBpZiAoY29tbW9uVGFncy5pbmNsdWRlcygnQVBJJykgJiYgY29tbW9uVGFncy5pbmNsdWRlcygn66y47IScJykpIHtcbiAgICAgIHJldHVybiAnQVBJIOusuOyEnCDqtIDqs4QnXG4gICAgfVxuICAgIGlmIChjb21tb25UYWdzLmluY2x1ZGVzKCfshKTsuZgnKSAmJiBjb21tb25UYWdzLmluY2x1ZGVzKCfqsJzrsJwnKSkge1xuICAgICAgcmV0dXJuICfqsJzrsJwg7ZmY6rK9IOq0gOqzhCdcbiAgICB9XG4gICAgaWYgKGNvbW1vblRhZ3MuaW5jbHVkZXMoJ+2UhOuhnOygne2KuCcpICYmIGNvbW1vblRhZ3MuaW5jbHVkZXMoJ+usuOyEnCcpKSB7XG4gICAgICByZXR1cm4gJ+2UhOuhnOygne2KuCDrrLjshJwg6rSA6rOEJ1xuICAgIH1cblxuICAgIHJldHVybiAn6rSA66CoIOusuOyEnCdcbiAgfVxufVxuXG4vLyDsi7HquIDthqQg7J247Iqk7YS07IqkXG5leHBvcnQgY29uc3QgYWlTZXJ2aWNlID0gbmV3IEFJU2VydmljZSgpXG4iXSwibmFtZXMiOlsiQUlTZXJ2aWNlIiwiZ2VuZXJhdGVUYWdzIiwiY29udGVudCIsInRpdGxlIiwibW9ja1RhZ3MiLCJrZXl3b3JkcyIsImV4dHJhY3RLZXl3b3JkcyIsImZvckVhY2giLCJrZXl3b3JkIiwiY29uZmlkZW5jZSIsIk1hdGgiLCJyYW5kb20iLCJwdXNoIiwidGFnIiwicmVhc29uIiwiY2F0ZWdvcmllcyIsImRldGVjdENhdGVnb3JpZXMiLCJjYXRlZ29yeSIsInNvcnQiLCJhIiwiYiIsInNlbWFudGljU2VhcmNoIiwicXVlcnkiLCJkb2N1bWVudHMiLCJyZXN1bHRzIiwiZG9jIiwicmVsZXZhbmNlU2NvcmUiLCJjYWxjdWxhdGVSZWxldmFuY2UiLCJtYXRjaGVkVGVybXMiLCJmaW5kTWF0Y2hlZFRlcm1zIiwiZ2VuZXJhdGVTdW1tYXJ5Iiwic2VudGVuY2VzIiwic3BsaXQiLCJmaWx0ZXIiLCJzIiwidHJpbSIsImxlbmd0aCIsInN1bW1hcnkiLCJzbGljZSIsImpvaW4iLCJhbmFseXplRG9jdW1lbnQiLCJkb2N1bWVudCIsImFsbERvY3VtZW50cyIsImRlc2NyaXB0aW9uIiwiYWlGcmllbmRsaW5lc3NTY29yZSIsImV2YWx1YXRlQUlGcmllbmRsaW5lc3MiLCJzdWdnZXN0ZWRUYWdzIiwicmVsYXRpb25zaGlwcyIsImFuYWx5emVEb2N1bWVudFJlbGF0aW9uc2hpcHMiLCJ0b3BpY3MiLCJleHRyYWN0VG9waWNzIiwic2VudGltZW50IiwiYW5hbHl6ZVNlbnRpbWVudCIsImltcHJvdmVtZW50cyIsImdlbmVyYXRlSW1wcm92ZW1lbnRzIiwic2NvcmUiLCJtZXRhZGF0YSIsImF1dGhvciIsInRhZ3MiLCJpbmNsdWRlcyIsIndvcmRDb3VudCIsIm1pbiIsInRleHQiLCJ0b0xvd2VyQ2FzZSIsInBvc2l0aXZlV29yZHMiLCJuZWdhdGl2ZVdvcmRzIiwicG9zaXRpdmVDb3VudCIsIndvcmQiLCJuZWdhdGl2ZUNvdW50IiwiYWlTY29yZSIsIm90aGVyRG9jIiwiaWQiLCJzaW1pbGFyaXR5IiwiY2FsY3VsYXRlU2ltaWxhcml0eSIsInRhcmdldCIsInJlbGF0aW9uc2hpcCIsImRldGVybWluZVJlbGF0aW9uc2hpcCIsInN0cmVuZ3RoIiwiaSIsImoiLCJkb2MxIiwiZG9jMiIsInNvdXJjZSIsIndvcmRzIiwicmVwbGFjZSIsIk1hcCIsInNldCIsImdldCIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJfIiwiY291bnQiLCJtYXAiLCJxdWVyeVRlcm1zIiwidGVybSIsInNvbWUiLCJ0YWdzMSIsIlNldCIsInRhZ3MyIiwiY29tbW9uVGFncyIsImhhcyIsInRhZ1NpbWlsYXJpdHkiLCJzaXplIiwibWF4IiwidGl0bGVTaW1pbGFyaXR5Iiwic3RyaW5nU2ltaWxhcml0eSIsInN0cjEiLCJzdHIyIiwid29yZHMxIiwid29yZHMyIiwiY29tbW9uV29yZHMiLCJjb25zdHJ1Y3RvciIsImFwaUtleSIsImFpU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/ai-service.ts\n"));

/***/ })

});