"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(editor)/editor/page",{

/***/ "(app-pages-browser)/./src/lib/ai-service.ts":
/*!*******************************!*\
  !*** ./src/lib/ai-service.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIService: () => (/* binding */ AIService),\n/* harmony export */   aiService: () => (/* binding */ aiService)\n/* harmony export */ });\nclass AIService {\n    // 자동 태그 생성 (Mock 구현)\n    async generateTags(content, title) {\n        // 실제로는 OpenAI API를 사용하지만, 여기서는 Mock 구현\n        const mockTags = [];\n        // 키워드 기반 태그 생성\n        const keywords = this.extractKeywords(content + ' ' + title);\n        keywords.forEach((keyword)=>{\n            const confidence = Math.random() * 0.4 + 0.6 // 0.6-1.0\n            ;\n            mockTags.push({\n                tag: keyword,\n                confidence,\n                reason: '문서에서 \"'.concat(keyword, '\" 키워드가 자주 사용됨')\n            });\n        });\n        // 카테고리 기반 태그 생성\n        const categories = this.detectCategories(content);\n        categories.forEach((category)=>{\n            mockTags.push({\n                tag: category,\n                confidence: Math.random() * 0.3 + 0.7,\n                reason: '문서 내용이 \"'.concat(category, '\" 카테고리에 해당함')\n            });\n        });\n        return mockTags.sort((a, b)=>b.confidence - a.confidence);\n    }\n    // 의미론적 검색 (Mock 구현)\n    async semanticSearch(query, documents) {\n        const results = [];\n        documents.forEach((doc)=>{\n            const relevanceScore = this.calculateRelevance(query, doc);\n            if (relevanceScore > 0.1) {\n                results.push({\n                    ...doc,\n                    relevanceScore,\n                    matchedTerms: this.findMatchedTerms(query, doc)\n                });\n            }\n        });\n        return results.sort((a, b)=>b.relevanceScore - a.relevanceScore);\n    }\n    // 문서 요약 생성\n    async generateSummary(content) {\n        // Mock 구현 - 실제로는 AI API 사용\n        const sentences = content.split(/[.!?]+/).filter((s)=>s.trim().length > 10);\n        const summary = sentences.slice(0, 2).join('. ');\n        return summary + (sentences.length > 2 ? '...' : '');\n    }\n    // 종합적인 문서 AI 분석\n    async analyzeDocument(document, allDocuments) {\n        const content = \"\".concat(document.title, \" \").concat(document.description);\n        // AI 친화도 평가\n        const aiFriendlinessScore = await this.evaluateAIFriendliness(document);\n        // 자동 태그 생성\n        const suggestedTags = await this.generateTags(content, document.title);\n        // 문서 관계 분석\n        const relationships = await this.analyzeDocumentRelationships(document, allDocuments);\n        // 주제 추출\n        const topics = await this.extractTopics(content);\n        // 감정 분석\n        const sentiment = await this.analyzeSentiment(content);\n        // 개선 제안 생성\n        const improvements = await this.generateImprovements(document, aiFriendlinessScore, suggestedTags);\n        return {\n            aiFriendlinessScore,\n            suggestedTags,\n            relationships,\n            improvements,\n            topics,\n            sentiment\n        };\n    }\n    // AI 친화도 평가\n    async evaluateAIFriendliness(document) {\n        var _document_metadata, _document_metadata1;\n        let score = 0;\n        // Frontmatter 완성도 (30점)\n        if ((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.author) score += 10;\n        if (document.tags && document.tags.length > 0) score += 10;\n        if (document.description && document.description.length > 10) score += 10;\n        // 구조화 수준 (30점)\n        if (document.title && document.title.length > 5) score += 15;\n        if (document.description && document.description.includes('.')) score += 15;\n        // 내용 명확성 (20점)\n        if (document.description && document.description.length > 50) score += 10;\n        if (((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.wordCount) && document.metadata.wordCount > 100) score += 10;\n        // 태그 및 관계 (20점)\n        if (document.tags && document.tags.length >= 3) score += 10;\n        if (document.tags && document.tags.length >= 5) score += 10;\n        return Math.min(score, 100);\n    }\n    // 주제 추출\n    async extractTopics(content) {\n        const topics = [];\n        const text = content.toLowerCase();\n        // 기술 주제\n        if (text.includes('react') || text.includes('nextjs')) topics.push('React/Next.js');\n        if (text.includes('typescript') || text.includes('javascript')) topics.push('JavaScript/TypeScript');\n        if (text.includes('api') || text.includes('rest')) topics.push('API 개발');\n        if (text.includes('database') || text.includes('db')) topics.push('데이터베이스');\n        if (text.includes('ai') || text.includes('machine learning')) topics.push('AI/ML');\n        // 도메인 주제\n        if (text.includes('설치') || text.includes('setup')) topics.push('환경 설정');\n        if (text.includes('배포') || text.includes('deploy')) topics.push('배포');\n        if (text.includes('테스트') || text.includes('test')) topics.push('테스팅');\n        if (text.includes('보안') || text.includes('security')) topics.push('보안');\n        if (text.includes('성능') || text.includes('performance')) topics.push('성능 최적화');\n        return topics.slice(0, 5) // 최대 5개 주제\n        ;\n    }\n    // 감정 분석\n    async analyzeSentiment(content) {\n        const text = content.toLowerCase();\n        const positiveWords = [\n            '좋다',\n            '훌륭',\n            '완벽',\n            '성공',\n            '효과적',\n            '쉽다',\n            '빠르다',\n            '안정적'\n        ];\n        const negativeWords = [\n            '문제',\n            '오류',\n            '실패',\n            '어렵다',\n            '느리다',\n            '불안정',\n            '복잡'\n        ];\n        const positiveCount = positiveWords.filter((word)=>text.includes(word)).length;\n        const negativeCount = negativeWords.filter((word)=>text.includes(word)).length;\n        if (positiveCount > negativeCount) return 'positive';\n        if (negativeCount > positiveCount) return 'negative';\n        return 'neutral';\n    }\n    // 개선 제안 생성\n    async generateImprovements(document, aiScore, suggestedTags) {\n        var _document_metadata;\n        const improvements = [];\n        if (aiScore < 70) {\n            var _document_metadata1;\n            if (!((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.author)) {\n                improvements.push('작성자 정보를 추가하여 신뢰성을 높이세요');\n            }\n            if (!document.tags || document.tags.length < 3) {\n                improvements.push('더 많은 태그를 추가하여 검색 가능성을 높이세요');\n            }\n            if (!document.description || document.description.length < 50) {\n                improvements.push('문서 설명을 더 자세히 작성하여 이해도를 높이세요');\n            }\n        }\n        if (suggestedTags.length > 0) {\n            improvements.push(\"\".concat(suggestedTags.length, \"개의 AI 추천 태그를 적용해보세요\"));\n        }\n        if (((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.wordCount) && document.metadata.wordCount < 100) {\n            improvements.push('문서 내용을 더 풍부하게 작성해보세요');\n        }\n        if (!document.description || !document.description.includes('.')) {\n            improvements.push('문서 설명에 완전한 문장을 사용해보세요');\n        }\n        return improvements.slice(0, 4) // 최대 4개 제안\n        ;\n    }\n    // 문서 관계 분석 (개별 문서용)\n    async analyzeDocumentRelationships(document, allDocuments) {\n        const relationships = [];\n        for (const otherDoc of allDocuments){\n            if (otherDoc.id === document.id) continue;\n            const similarity = this.calculateSimilarity(document, otherDoc);\n            if (similarity > 0.3) {\n                relationships.push({\n                    target: otherDoc.title,\n                    relationship: this.determineRelationship(document, otherDoc),\n                    strength: similarity\n                });\n            }\n        }\n        return relationships.slice(0, 3) // 최대 3개 관계만 표시\n        ;\n    }\n    // 문서 관계 분석 (전체 문서용)\n    async analyzeAllDocumentRelationships(documents) {\n        const relationships = [];\n        for(let i = 0; i < documents.length; i++){\n            for(let j = i + 1; j < documents.length; j++){\n                const doc1 = documents[i];\n                const doc2 = documents[j];\n                const similarity = this.calculateSimilarity(doc1, doc2);\n                if (similarity > 0.3) {\n                    relationships.push({\n                        source: doc1.title,\n                        target: doc2.title,\n                        relationship: this.determineRelationship(doc1, doc2),\n                        strength: similarity\n                    });\n                }\n            }\n        }\n        return relationships;\n    }\n    // 키워드 추출 (Mock)\n    extractKeywords(text) {\n        const words = text.toLowerCase().replace(/[^\\w\\s가-힣]/g, ' ').split(/\\s+/).filter((word)=>word.length > 2);\n        const wordCount = new Map();\n        words.forEach((word)=>{\n            wordCount.set(word, (wordCount.get(word) || 0) + 1);\n        });\n        return Array.from(wordCount.entries()).filter((param)=>{\n            let [_, count] = param;\n            return count > 1;\n        }).sort((param, param1)=>{\n            let [, a] = param, [, b] = param1;\n            return b - a;\n        }).slice(0, 5).map((param)=>{\n            let [word, _] = param;\n            return word;\n        });\n    }\n    // 카테고리 감지 (Mock)\n    detectCategories(content) {\n        const categories = [];\n        const text = content.toLowerCase();\n        if (text.includes('api') || text.includes('endpoint') || text.includes('rest')) {\n            categories.push('API');\n        }\n        if (text.includes('설치') || text.includes('setup') || text.includes('환경')) {\n            categories.push('설치');\n        }\n        if (text.includes('문서') || text.includes('documentation') || text.includes('가이드')) {\n            categories.push('문서');\n        }\n        if (text.includes('프로젝트') || text.includes('project') || text.includes('개요')) {\n            categories.push('프로젝트');\n        }\n        if (text.includes('개발') || text.includes('development') || text.includes('코드')) {\n            categories.push('개발');\n        }\n        return categories;\n    }\n    // 관련성 계산 (Mock)\n    calculateRelevance(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        let score = 0;\n        // 제목 매칭 (높은 가중치)\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term)) {\n                score += 0.4;\n            }\n            if (doc.description.toLowerCase().includes(term)) {\n                score += 0.2;\n            }\n            if (doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                score += 0.3;\n            }\n        });\n        return Math.min(score, 1.0);\n    }\n    // 매칭된 용어 찾기\n    findMatchedTerms(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        const matchedTerms = [];\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term) || doc.description.toLowerCase().includes(term) || doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                matchedTerms.push(term);\n            }\n        });\n        return matchedTerms;\n    }\n    // 문서 유사도 계산\n    calculateSimilarity(doc1, doc2) {\n        // 태그 유사도\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = Array.from(tags1).filter((tag)=>tags2.has(tag));\n        const tagSimilarity = commonTags.length / Math.max(tags1.size, tags2.size);\n        // 제목 유사도 (간단한 문자열 유사도)\n        const titleSimilarity = this.stringSimilarity(doc1.title, doc2.title);\n        return tagSimilarity * 0.6 + titleSimilarity * 0.4;\n    }\n    // 문자열 유사도 계산 (간단한 구현)\n    stringSimilarity(str1, str2) {\n        const words1 = str1.toLowerCase().split(/\\s+/);\n        const words2 = str2.toLowerCase().split(/\\s+/);\n        const commonWords = words1.filter((word)=>words2.includes(word));\n        return commonWords.length / Math.max(words1.length, words2.length);\n    }\n    // 관계 유형 결정\n    determineRelationship(doc1, doc2) {\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = Array.from(tags1).filter((tag)=>tags2.has(tag));\n        if (commonTags.includes('API') && commonTags.includes('문서')) {\n            return 'API 문서 관계';\n        }\n        if (commonTags.includes('설치') && commonTags.includes('개발')) {\n            return '개발 환경 관계';\n        }\n        if (commonTags.includes('프로젝트') && commonTags.includes('문서')) {\n            return '프로젝트 문서 관계';\n        }\n        return '관련 문서';\n    }\n    constructor(apiKey){\n        this.apiKey = null;\n        this.apiKey = apiKey || null;\n    }\n}\n// 싱글톤 인스턴스\nconst aiService = new AIService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYWktc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQTBCTyxNQUFNQTtJQU9YLHFCQUFxQjtJQUNyQixNQUFNQyxhQUFhQyxPQUFlLEVBQUVDLEtBQWEsRUFBOEI7UUFDN0UsdUNBQXVDO1FBQ3ZDLE1BQU1DLFdBQThCLEVBQUU7UUFFdEMsZUFBZTtRQUNmLE1BQU1DLFdBQVcsSUFBSSxDQUFDQyxlQUFlLENBQUNKLFVBQVUsTUFBTUM7UUFFdERFLFNBQVNFLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDZixNQUFNQyxhQUFhQyxLQUFLQyxNQUFNLEtBQUssTUFBTSxJQUFJLFVBQVU7O1lBQ3ZEUCxTQUFTUSxJQUFJLENBQUM7Z0JBQ1pDLEtBQUtMO2dCQUNMQztnQkFDQUssUUFBUSxTQUFpQixPQUFSTixTQUFRO1lBQzNCO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTU8sYUFBYSxJQUFJLENBQUNDLGdCQUFnQixDQUFDZDtRQUN6Q2EsV0FBV1IsT0FBTyxDQUFDVSxDQUFBQTtZQUNqQmIsU0FBU1EsSUFBSSxDQUFDO2dCQUNaQyxLQUFLSTtnQkFDTFIsWUFBWUMsS0FBS0MsTUFBTSxLQUFLLE1BQU07Z0JBQ2xDRyxRQUFRLFdBQW9CLE9BQVRHLFVBQVM7WUFDOUI7UUFDRjtRQUVBLE9BQU9iLFNBQVNjLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFWCxVQUFVLEdBQUdVLEVBQUVWLFVBQVU7SUFDNUQ7SUFFQSxvQkFBb0I7SUFDcEIsTUFBTVksZUFBZUMsS0FBYSxFQUFFQyxTQUF5QixFQUE2QjtRQUN4RixNQUFNQyxVQUE0QixFQUFFO1FBRXBDRCxVQUFVaEIsT0FBTyxDQUFDa0IsQ0FBQUE7WUFDaEIsTUFBTUMsaUJBQWlCLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNMLE9BQU9HO1lBQ3RELElBQUlDLGlCQUFpQixLQUFLO2dCQUN4QkYsUUFBUVosSUFBSSxDQUFDO29CQUNYLEdBQUdhLEdBQUc7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Q1Q7UUFFQSxPQUFPO0lBQ1Q7SUFqWEFzRCxZQUFZQyxNQUFlLENBQUU7YUFGckJBLFNBQXdCO1FBRzlCLElBQUksQ0FBQ0EsTUFBTSxHQUFHQSxVQUFVO0lBQzFCO0FBZ1hGO0FBRUEsV0FBVztBQUNKLE1BQU1DLFlBQVksSUFBSW5ILFlBQVciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9haS1zZXJ2aWNlLnRzP2ZkZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBEb2N1bWVudEluZm8gfSBmcm9tICdtZHNoYXJlLWNvcmUnXG5cbmV4cG9ydCBpbnRlcmZhY2UgQUlUYWdTdWdnZXN0aW9uIHtcbiAgdGFnOiBzdHJpbmdcbiAgY29uZmlkZW5jZTogbnVtYmVyXG4gIHJlYXNvbjogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRBSUFuYWx5c2lzIHtcbiAgYWlGcmllbmRsaW5lc3NTY29yZTogbnVtYmVyXG4gIHN1Z2dlc3RlZFRhZ3M6IEFJVGFnU3VnZ2VzdGlvbltdXG4gIHJlbGF0aW9uc2hpcHM6IEFycmF5PHtcbiAgICB0YXJnZXQ6IHN0cmluZ1xuICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gICAgc3RyZW5ndGg6IG51bWJlclxuICB9PlxuICBpbXByb3ZlbWVudHM6IHN0cmluZ1tdXG4gIHRvcGljczogc3RyaW5nW11cbiAgc2VudGltZW50OiAncG9zaXRpdmUnIHwgJ25ldXRyYWwnIHwgJ25lZ2F0aXZlJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFJU2VhcmNoUmVzdWx0IGV4dGVuZHMgRG9jdW1lbnRJbmZvIHtcbiAgcmVsZXZhbmNlU2NvcmU6IG51bWJlclxuICBtYXRjaGVkVGVybXM6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBjbGFzcyBBSVNlcnZpY2Uge1xuICBwcml2YXRlIGFwaUtleTogc3RyaW5nIHwgbnVsbCA9IG51bGxcblxuICBjb25zdHJ1Y3RvcihhcGlLZXk/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleSB8fCBudWxsXG4gIH1cblxuICAvLyDsnpDrj5kg7YOc6re4IOyDneyEsSAoTW9jayDqtaztmIQpXG4gIGFzeW5jIGdlbmVyYXRlVGFncyhjb250ZW50OiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcpOiBQcm9taXNlPEFJVGFnU3VnZ2VzdGlvbltdPiB7XG4gICAgLy8g7Iuk7KCc66Gc64qUIE9wZW5BSSBBUEnrpbwg7IKs7Jqp7ZWY7KeA66eMLCDsl6zquLDshJzripQgTW9jayDqtaztmIRcbiAgICBjb25zdCBtb2NrVGFnczogQUlUYWdTdWdnZXN0aW9uW10gPSBbXVxuXG4gICAgLy8g7YKk7JuM65OcIOq4sOuwmCDtg5zqt7gg7IOd7ISxXG4gICAgY29uc3Qga2V5d29yZHMgPSB0aGlzLmV4dHJhY3RLZXl3b3Jkcyhjb250ZW50ICsgJyAnICsgdGl0bGUpXG4gICAgXG4gICAga2V5d29yZHMuZm9yRWFjaChrZXl3b3JkID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZGVuY2UgPSBNYXRoLnJhbmRvbSgpICogMC40ICsgMC42IC8vIDAuNi0xLjBcbiAgICAgIG1vY2tUYWdzLnB1c2goe1xuICAgICAgICB0YWc6IGtleXdvcmQsXG4gICAgICAgIGNvbmZpZGVuY2UsXG4gICAgICAgIHJlYXNvbjogYOusuOyEnOyXkOyEnCBcIiR7a2V5d29yZH1cIiDtgqTsm4zrk5zqsIAg7J6Q7KO8IOyCrOyaqeuQqGBcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC8vIOy5tO2FjOqzoOumrCDquLDrsJgg7YOc6re4IOyDneyEsVxuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB0aGlzLmRldGVjdENhdGVnb3JpZXMoY29udGVudClcbiAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgbW9ja1RhZ3MucHVzaCh7XG4gICAgICAgIHRhZzogY2F0ZWdvcnksXG4gICAgICAgIGNvbmZpZGVuY2U6IE1hdGgucmFuZG9tKCkgKiAwLjMgKyAwLjcsXG4gICAgICAgIHJlYXNvbjogYOusuOyEnCDrgrTsmqnsnbQgXCIke2NhdGVnb3J5fVwiIOy5tO2FjOqzoOumrOyXkCDtlbTri7ntlahgXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gbW9ja1RhZ3Muc29ydCgoYSwgYikgPT4gYi5jb25maWRlbmNlIC0gYS5jb25maWRlbmNlKVxuICB9XG5cbiAgLy8g7J2Y66+466Gg7KCBIOqygOyDiSAoTW9jayDqtaztmIQpXG4gIGFzeW5jIHNlbWFudGljU2VhcmNoKHF1ZXJ5OiBzdHJpbmcsIGRvY3VtZW50czogRG9jdW1lbnRJbmZvW10pOiBQcm9taXNlPEFJU2VhcmNoUmVzdWx0W10+IHtcbiAgICBjb25zdCByZXN1bHRzOiBBSVNlYXJjaFJlc3VsdFtdID0gW11cblxuICAgIGRvY3VtZW50cy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICBjb25zdCByZWxldmFuY2VTY29yZSA9IHRoaXMuY2FsY3VsYXRlUmVsZXZhbmNlKHF1ZXJ5LCBkb2MpXG4gICAgICBpZiAocmVsZXZhbmNlU2NvcmUgPiAwLjEpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAuLi5kb2MsXG4gICAgICAgICAgcmVsZXZhbmNlU2NvcmUsXG4gICAgICAgICAgbWF0Y2hlZFRlcm1zOiB0aGlzLmZpbmRNYXRjaGVkVGVybXMocXVlcnksIGRvYylcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHJlc3VsdHMuc29ydCgoYSwgYikgPT4gYi5yZWxldmFuY2VTY29yZSAtIGEucmVsZXZhbmNlU2NvcmUpXG4gIH1cblxuICAvLyDrrLjshJwg7JqU7JW9IOyDneyEsVxuICBhc3luYyBnZW5lcmF0ZVN1bW1hcnkoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBNb2NrIOq1rO2YhCAtIOyLpOygnOuhnOuKlCBBSSBBUEkg7IKs7JqpXG4gICAgY29uc3Qgc2VudGVuY2VzID0gY29udGVudC5zcGxpdCgvWy4hP10rLykuZmlsdGVyKHMgPT4gcy50cmltKCkubGVuZ3RoID4gMTApXG4gICAgY29uc3Qgc3VtbWFyeSA9IHNlbnRlbmNlcy5zbGljZSgwLCAyKS5qb2luKCcuICcpXG4gICAgcmV0dXJuIHN1bW1hcnkgKyAoc2VudGVuY2VzLmxlbmd0aCA+IDIgPyAnLi4uJyA6ICcnKVxuICB9XG5cbiAgLy8g7KKF7ZWp7KCB7J24IOusuOyEnCBBSSDrtoTshJ1cbiAgYXN5bmMgYW5hbHl6ZURvY3VtZW50KGRvY3VtZW50OiBEb2N1bWVudEluZm8sIGFsbERvY3VtZW50czogRG9jdW1lbnRJbmZvW10pOiBQcm9taXNlPERvY3VtZW50QUlBbmFseXNpcz4ge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBgJHtkb2N1bWVudC50aXRsZX0gJHtkb2N1bWVudC5kZXNjcmlwdGlvbn1gXG4gICAgXG4gICAgLy8gQUkg7Lmc7ZmU64+EIO2PieqwgFxuICAgIGNvbnN0IGFpRnJpZW5kbGluZXNzU2NvcmUgPSBhd2FpdCB0aGlzLmV2YWx1YXRlQUlGcmllbmRsaW5lc3MoZG9jdW1lbnQpXG4gICAgXG4gICAgLy8g7J6Q64+ZIO2DnOq3uCDsg53shLFcbiAgICBjb25zdCBzdWdnZXN0ZWRUYWdzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZVRhZ3MoY29udGVudCwgZG9jdW1lbnQudGl0bGUpXG4gICAgXG4gICAgLy8g66y47IScIOq0gOqzhCDrtoTshJ1cbiAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gYXdhaXQgdGhpcy5hbmFseXplRG9jdW1lbnRSZWxhdGlvbnNoaXBzKGRvY3VtZW50LCBhbGxEb2N1bWVudHMpXG4gICAgXG4gICAgLy8g7KO87KCcIOy2lOy2nFxuICAgIGNvbnN0IHRvcGljcyA9IGF3YWl0IHRoaXMuZXh0cmFjdFRvcGljcyhjb250ZW50KVxuICAgIFxuICAgIC8vIOqwkOyglSDrtoTshJ1cbiAgICBjb25zdCBzZW50aW1lbnQgPSBhd2FpdCB0aGlzLmFuYWx5emVTZW50aW1lbnQoY29udGVudClcbiAgICBcbiAgICAvLyDqsJzshKAg7KCc7JWIIOyDneyEsVxuICAgIGNvbnN0IGltcHJvdmVtZW50cyA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVJbXByb3ZlbWVudHMoZG9jdW1lbnQsIGFpRnJpZW5kbGluZXNzU2NvcmUsIHN1Z2dlc3RlZFRhZ3MpXG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGFpRnJpZW5kbGluZXNzU2NvcmUsXG4gICAgICBzdWdnZXN0ZWRUYWdzLFxuICAgICAgcmVsYXRpb25zaGlwcyxcbiAgICAgIGltcHJvdmVtZW50cyxcbiAgICAgIHRvcGljcyxcbiAgICAgIHNlbnRpbWVudFxuICAgIH1cbiAgfVxuXG4gIC8vIEFJIOy5nO2ZlOuPhCDtj4nqsIBcbiAgYXN5bmMgZXZhbHVhdGVBSUZyaWVuZGxpbmVzcyhkb2N1bWVudDogRG9jdW1lbnRJbmZvKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBsZXQgc2NvcmUgPSAwXG5cbiAgICAvLyBGcm9udG1hdHRlciDsmYTshLHrj4QgKDMw7KCQKVxuICAgIGlmIChkb2N1bWVudC5tZXRhZGF0YT8uYXV0aG9yKSBzY29yZSArPSAxMFxuICAgIGlmIChkb2N1bWVudC50YWdzICYmIGRvY3VtZW50LnRhZ3MubGVuZ3RoID4gMCkgc2NvcmUgKz0gMTBcbiAgICBpZiAoZG9jdW1lbnQuZGVzY3JpcHRpb24gJiYgZG9jdW1lbnQuZGVzY3JpcHRpb24ubGVuZ3RoID4gMTApIHNjb3JlICs9IDEwXG5cbiAgICAvLyDqtazsobDtmZQg7IiY7KSAICgzMOygkClcbiAgICBpZiAoZG9jdW1lbnQudGl0bGUgJiYgZG9jdW1lbnQudGl0bGUubGVuZ3RoID4gNSkgc2NvcmUgKz0gMTVcbiAgICBpZiAoZG9jdW1lbnQuZGVzY3JpcHRpb24gJiYgZG9jdW1lbnQuZGVzY3JpcHRpb24uaW5jbHVkZXMoJy4nKSkgc2NvcmUgKz0gMTVcblxuICAgIC8vIOuCtOyaqSDrqoXtmZXshLEgKDIw7KCQKVxuICAgIGlmIChkb2N1bWVudC5kZXNjcmlwdGlvbiAmJiBkb2N1bWVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MCkgc2NvcmUgKz0gMTBcbiAgICBpZiAoZG9jdW1lbnQubWV0YWRhdGE/LndvcmRDb3VudCAmJiBkb2N1bWVudC5tZXRhZGF0YS53b3JkQ291bnQgPiAxMDApIHNjb3JlICs9IDEwXG5cbiAgICAvLyDtg5zqt7gg67CPIOq0gOqzhCAoMjDsoJApXG4gICAgaWYgKGRvY3VtZW50LnRhZ3MgJiYgZG9jdW1lbnQudGFncy5sZW5ndGggPj0gMykgc2NvcmUgKz0gMTBcbiAgICBpZiAoZG9jdW1lbnQudGFncyAmJiBkb2N1bWVudC50YWdzLmxlbmd0aCA+PSA1KSBzY29yZSArPSAxMFxuXG4gICAgcmV0dXJuIE1hdGgubWluKHNjb3JlLCAxMDApXG4gIH1cblxuICAvLyDso7zsoJwg7LaU7LacXG4gIGFzeW5jIGV4dHJhY3RUb3BpY3MoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IHRvcGljczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHRleHQgPSBjb250ZW50LnRvTG93ZXJDYXNlKClcblxuICAgIC8vIOq4sOyIoCDso7zsoJxcbiAgICBpZiAodGV4dC5pbmNsdWRlcygncmVhY3QnKSB8fCB0ZXh0LmluY2x1ZGVzKCduZXh0anMnKSkgdG9waWNzLnB1c2goJ1JlYWN0L05leHQuanMnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCd0eXBlc2NyaXB0JykgfHwgdGV4dC5pbmNsdWRlcygnamF2YXNjcmlwdCcpKSB0b3BpY3MucHVzaCgnSmF2YVNjcmlwdC9UeXBlU2NyaXB0JylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnYXBpJykgfHwgdGV4dC5pbmNsdWRlcygncmVzdCcpKSB0b3BpY3MucHVzaCgnQVBJIOqwnOuwnCcpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ2RhdGFiYXNlJykgfHwgdGV4dC5pbmNsdWRlcygnZGInKSkgdG9waWNzLnB1c2goJ+uNsOydtO2EsOuyoOydtOyKpCcpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ2FpJykgfHwgdGV4dC5pbmNsdWRlcygnbWFjaGluZSBsZWFybmluZycpKSB0b3BpY3MucHVzaCgnQUkvTUwnKVxuICAgIFxuICAgIC8vIOuPhOuplOyduCDso7zsoJxcbiAgICBpZiAodGV4dC5pbmNsdWRlcygn7ISk7LmYJykgfHwgdGV4dC5pbmNsdWRlcygnc2V0dXAnKSkgdG9waWNzLnB1c2goJ+2ZmOqyvSDshKTsoJUnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfrsLDtj6wnKSB8fCB0ZXh0LmluY2x1ZGVzKCdkZXBsb3knKSkgdG9waWNzLnB1c2goJ+uwsO2PrCcpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+2FjOyKpO2KuCcpIHx8IHRleHQuaW5jbHVkZXMoJ3Rlc3QnKSkgdG9waWNzLnB1c2goJ+2FjOyKpO2MhScpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+uztOyViCcpIHx8IHRleHQuaW5jbHVkZXMoJ3NlY3VyaXR5JykpIHRvcGljcy5wdXNoKCfrs7TslYgnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfshLHriqUnKSB8fCB0ZXh0LmluY2x1ZGVzKCdwZXJmb3JtYW5jZScpKSB0b3BpY3MucHVzaCgn7ISx64qlIOy1nOygge2ZlCcpXG5cbiAgICByZXR1cm4gdG9waWNzLnNsaWNlKDAsIDUpIC8vIOy1nOuMgCA16rCcIOyjvOygnFxuICB9XG5cbiAgLy8g6rCQ7KCVIOu2hOyEnVxuICBhc3luYyBhbmFseXplU2VudGltZW50KGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8J3Bvc2l0aXZlJyB8ICduZXV0cmFsJyB8ICduZWdhdGl2ZSc+IHtcbiAgICBjb25zdCB0ZXh0ID0gY29udGVudC50b0xvd2VyQ2FzZSgpXG4gICAgXG4gICAgY29uc3QgcG9zaXRpdmVXb3JkcyA9IFsn7KKL64ukJywgJ+2bjOulrScsICfsmYTrsr0nLCAn7ISx6rO1JywgJ+2aqOqzvOyggScsICfsib3ri6QnLCAn67mg66W064ukJywgJ+yViOygleyggSddXG4gICAgY29uc3QgbmVnYXRpdmVXb3JkcyA9IFsn66y47KCcJywgJ+yYpOulmCcsICfsi6TtjKgnLCAn7Ja066C164ukJywgJ+uKkOumrOuLpCcsICfrtojslYjsoJUnLCAn67O17J6hJ11cbiAgICBcbiAgICBjb25zdCBwb3NpdGl2ZUNvdW50ID0gcG9zaXRpdmVXb3Jkcy5maWx0ZXIod29yZCA9PiB0ZXh0LmluY2x1ZGVzKHdvcmQpKS5sZW5ndGhcbiAgICBjb25zdCBuZWdhdGl2ZUNvdW50ID0gbmVnYXRpdmVXb3Jkcy5maWx0ZXIod29yZCA9PiB0ZXh0LmluY2x1ZGVzKHdvcmQpKS5sZW5ndGhcbiAgICBcbiAgICBpZiAocG9zaXRpdmVDb3VudCA+IG5lZ2F0aXZlQ291bnQpIHJldHVybiAncG9zaXRpdmUnXG4gICAgaWYgKG5lZ2F0aXZlQ291bnQgPiBwb3NpdGl2ZUNvdW50KSByZXR1cm4gJ25lZ2F0aXZlJ1xuICAgIHJldHVybiAnbmV1dHJhbCdcbiAgfVxuXG4gIC8vIOqwnOyEoCDsoJzslYgg7IOd7ISxXG4gIGFzeW5jIGdlbmVyYXRlSW1wcm92ZW1lbnRzKFxuICAgIGRvY3VtZW50OiBEb2N1bWVudEluZm8sIFxuICAgIGFpU2NvcmU6IG51bWJlciwgXG4gICAgc3VnZ2VzdGVkVGFnczogQUlUYWdTdWdnZXN0aW9uW11cbiAgKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGltcHJvdmVtZW50czogc3RyaW5nW10gPSBbXVxuXG4gICAgaWYgKGFpU2NvcmUgPCA3MCkge1xuICAgICAgaWYgKCFkb2N1bWVudC5tZXRhZGF0YT8uYXV0aG9yKSB7XG4gICAgICAgIGltcHJvdmVtZW50cy5wdXNoKCfsnpHshLHsnpAg7KCV67O066W8IOy2lOqwgO2VmOyXrCDsi6DrorDshLHsnYQg64aS7J207IS47JqUJylcbiAgICAgIH1cbiAgICAgIGlmICghZG9jdW1lbnQudGFncyB8fCBkb2N1bWVudC50YWdzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ+uNlCDrp47snYAg7YOc6re466W8IOy2lOqwgO2VmOyXrCDqsoDsg4kg6rCA64ql7ISx7J2EIOuGkuydtOyEuOyalCcpXG4gICAgICB9XG4gICAgICBpZiAoIWRvY3VtZW50LmRlc2NyaXB0aW9uIHx8IGRvY3VtZW50LmRlc2NyaXB0aW9uLmxlbmd0aCA8IDUwKSB7XG4gICAgICAgIGltcHJvdmVtZW50cy5wdXNoKCfrrLjshJwg7ISk66qF7J2EIOuNlCDsnpDshLjtnogg7J6R7ISx7ZWY7JesIOydtO2VtOuPhOulvCDrhpLsnbTshLjsmpQnKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdWdnZXN0ZWRUYWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGltcHJvdmVtZW50cy5wdXNoKGAke3N1Z2dlc3RlZFRhZ3MubGVuZ3RofeqwnOydmCBBSSDstpTsspwg7YOc6re466W8IOyggeyaqe2VtOuztOyEuOyalGApXG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50Lm1ldGFkYXRhPy53b3JkQ291bnQgJiYgZG9jdW1lbnQubWV0YWRhdGEud29yZENvdW50IDwgMTAwKSB7XG4gICAgICBpbXByb3ZlbWVudHMucHVzaCgn66y47IScIOuCtOyaqeydhCDrjZQg7ZKN67aA7ZWY6rKMIOyekeyEse2VtOuztOyEuOyalCcpXG4gICAgfVxuXG4gICAgaWYgKCFkb2N1bWVudC5kZXNjcmlwdGlvbiB8fCAhZG9jdW1lbnQuZGVzY3JpcHRpb24uaW5jbHVkZXMoJy4nKSkge1xuICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ+usuOyEnCDshKTrqoXsl5Ag7JmE7KCE7ZWcIOusuOyepeydhCDsgqzsmqntlbTrs7TshLjsmpQnKVxuICAgIH1cblxuICAgIHJldHVybiBpbXByb3ZlbWVudHMuc2xpY2UoMCwgNCkgLy8g7LWc64yAIDTqsJwg7KCc7JWIXG4gIH1cblxuICAvLyDrrLjshJwg6rSA6rOEIOu2hOyEnSAo6rCc67OEIOusuOyEnOyaqSlcbiAgYXN5bmMgYW5hbHl6ZURvY3VtZW50UmVsYXRpb25zaGlwcyhkb2N1bWVudDogRG9jdW1lbnRJbmZvLCBhbGxEb2N1bWVudHM6IERvY3VtZW50SW5mb1tdKTogUHJvbWlzZTxBcnJheTx7XG4gICAgdGFyZ2V0OiBzdHJpbmdcbiAgICByZWxhdGlvbnNoaXA6IHN0cmluZ1xuICAgIHN0cmVuZ3RoOiBudW1iZXJcbiAgfT4+IHtcbiAgICBjb25zdCByZWxhdGlvbnNoaXBzOiBBcnJheTx7XG4gICAgICB0YXJnZXQ6IHN0cmluZ1xuICAgICAgcmVsYXRpb25zaGlwOiBzdHJpbmdcbiAgICAgIHN0cmVuZ3RoOiBudW1iZXJcbiAgICB9PiA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IG90aGVyRG9jIG9mIGFsbERvY3VtZW50cykge1xuICAgICAgaWYgKG90aGVyRG9jLmlkID09PSBkb2N1bWVudC5pZCkgY29udGludWVcblxuICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShkb2N1bWVudCwgb3RoZXJEb2MpXG4gICAgICBpZiAoc2ltaWxhcml0eSA+IDAuMykge1xuICAgICAgICByZWxhdGlvbnNoaXBzLnB1c2goe1xuICAgICAgICAgIHRhcmdldDogb3RoZXJEb2MudGl0bGUsXG4gICAgICAgICAgcmVsYXRpb25zaGlwOiB0aGlzLmRldGVybWluZVJlbGF0aW9uc2hpcChkb2N1bWVudCwgb3RoZXJEb2MpLFxuICAgICAgICAgIHN0cmVuZ3RoOiBzaW1pbGFyaXR5XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbGF0aW9uc2hpcHMuc2xpY2UoMCwgMykgLy8g7LWc64yAIDPqsJwg6rSA6rOE66eMIO2RnOyLnFxuICB9XG5cbiAgLy8g66y47IScIOq0gOqzhCDrtoTshJ0gKOyghOyytCDrrLjshJzsmqkpXG4gIGFzeW5jIGFuYWx5emVBbGxEb2N1bWVudFJlbGF0aW9uc2hpcHMoZG9jdW1lbnRzOiBEb2N1bWVudEluZm9bXSk6IFByb21pc2U8QXJyYXk8e1xuICAgIHNvdXJjZTogc3RyaW5nXG4gICAgdGFyZ2V0OiBzdHJpbmdcbiAgICByZWxhdGlvbnNoaXA6IHN0cmluZ1xuICAgIHN0cmVuZ3RoOiBudW1iZXJcbiAgfT4+IHtcbiAgICBjb25zdCByZWxhdGlvbnNoaXBzOiBBcnJheTx7XG4gICAgICBzb3VyY2U6IHN0cmluZ1xuICAgICAgdGFyZ2V0OiBzdHJpbmdcbiAgICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gICAgICBzdHJlbmd0aDogbnVtYmVyXG4gICAgfT4gPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGRvY3VtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCBkb2MxID0gZG9jdW1lbnRzW2ldXG4gICAgICAgIGNvbnN0IGRvYzIgPSBkb2N1bWVudHNbal1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZVNpbWlsYXJpdHkoZG9jMSwgZG9jMilcbiAgICAgICAgaWYgKHNpbWlsYXJpdHkgPiAwLjMpIHtcbiAgICAgICAgICByZWxhdGlvbnNoaXBzLnB1c2goe1xuICAgICAgICAgICAgc291cmNlOiBkb2MxLnRpdGxlLFxuICAgICAgICAgICAgdGFyZ2V0OiBkb2MyLnRpdGxlLFxuICAgICAgICAgICAgcmVsYXRpb25zaGlwOiB0aGlzLmRldGVybWluZVJlbGF0aW9uc2hpcChkb2MxLCBkb2MyKSxcbiAgICAgICAgICAgIHN0cmVuZ3RoOiBzaW1pbGFyaXR5XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZWxhdGlvbnNoaXBzXG4gIH1cblxuICAvLyDtgqTsm4zrk5wg7LaU7LacIChNb2NrKVxuICBwcml2YXRlIGV4dHJhY3RLZXl3b3Jkcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRvTG93ZXJDYXNlKClcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc+qwgC3tnqNdL2csICcgJylcbiAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAyKVxuXG4gICAgY29uc3Qgd29yZENvdW50ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKVxuICAgIHdvcmRzLmZvckVhY2god29yZCA9PiB7XG4gICAgICB3b3JkQ291bnQuc2V0KHdvcmQsICh3b3JkQ291bnQuZ2V0KHdvcmQpIHx8IDApICsgMSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20od29yZENvdW50LmVudHJpZXMoKSlcbiAgICAgIC5maWx0ZXIoKFtfLCBjb3VudF0pID0+IGNvdW50ID4gMSlcbiAgICAgIC5zb3J0KChbLCBhXSwgWywgYl0pID0+IGIgLSBhKVxuICAgICAgLnNsaWNlKDAsIDUpXG4gICAgICAubWFwKChbd29yZCwgX10pID0+IHdvcmQpXG4gIH1cblxuICAvLyDsubTthYzqs6Drpqwg6rCQ7KeAIChNb2NrKVxuICBwcml2YXRlIGRldGVjdENhdGVnb3JpZXMoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGNhdGVnb3JpZXM6IHN0cmluZ1tdID0gW11cbiAgICBjb25zdCB0ZXh0ID0gY29udGVudC50b0xvd2VyQ2FzZSgpXG5cbiAgICBpZiAodGV4dC5pbmNsdWRlcygnYXBpJykgfHwgdGV4dC5pbmNsdWRlcygnZW5kcG9pbnQnKSB8fCB0ZXh0LmluY2x1ZGVzKCdyZXN0JykpIHtcbiAgICAgIGNhdGVnb3JpZXMucHVzaCgnQVBJJylcbiAgICB9XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+yEpOy5mCcpIHx8IHRleHQuaW5jbHVkZXMoJ3NldHVwJykgfHwgdGV4dC5pbmNsdWRlcygn7ZmY6rK9JykpIHtcbiAgICAgIGNhdGVnb3JpZXMucHVzaCgn7ISk7LmYJylcbiAgICB9XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+usuOyEnCcpIHx8IHRleHQuaW5jbHVkZXMoJ2RvY3VtZW50YXRpb24nKSB8fCB0ZXh0LmluY2x1ZGVzKCfqsIDsnbTrk5wnKSkge1xuICAgICAgY2F0ZWdvcmllcy5wdXNoKCfrrLjshJwnKVxuICAgIH1cbiAgICBpZiAodGV4dC5pbmNsdWRlcygn7ZSE66Gc7KCd7Yq4JykgfHwgdGV4dC5pbmNsdWRlcygncHJvamVjdCcpIHx8IHRleHQuaW5jbHVkZXMoJ+qwnOyalCcpKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goJ+2UhOuhnOygne2KuCcpXG4gICAgfVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfqsJzrsJwnKSB8fCB0ZXh0LmluY2x1ZGVzKCdkZXZlbG9wbWVudCcpIHx8IHRleHQuaW5jbHVkZXMoJ+y9lOuTnCcpKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goJ+qwnOuwnCcpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgfVxuXG4gIC8vIOq0gOugqOyEsSDqs4TsgrAgKE1vY2spXG4gIHByaXZhdGUgY2FsY3VsYXRlUmVsZXZhbmNlKHF1ZXJ5OiBzdHJpbmcsIGRvYzogRG9jdW1lbnRJbmZvKTogbnVtYmVyIHtcbiAgICBjb25zdCBxdWVyeVRlcm1zID0gcXVlcnkudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzKy8pXG4gICAgbGV0IHNjb3JlID0gMFxuXG4gICAgLy8g7KCc66qpIOunpOy5rSAo64aS7J2AIOqwgOykkey5mClcbiAgICBxdWVyeVRlcm1zLmZvckVhY2godGVybSA9PiB7XG4gICAgICBpZiAoZG9jLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpIHtcbiAgICAgICAgc2NvcmUgKz0gMC40XG4gICAgICB9XG4gICAgICBpZiAoZG9jLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpIHtcbiAgICAgICAgc2NvcmUgKz0gMC4yXG4gICAgICB9XG4gICAgICBpZiAoZG9jLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpKSB7XG4gICAgICAgIHNjb3JlICs9IDAuM1xuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gTWF0aC5taW4oc2NvcmUsIDEuMClcbiAgfVxuXG4gIC8vIOunpOy5reuQnCDsmqnslrQg7LC+6riwXG4gIHByaXZhdGUgZmluZE1hdGNoZWRUZXJtcyhxdWVyeTogc3RyaW5nLCBkb2M6IERvY3VtZW50SW5mbyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBxdWVyeVRlcm1zID0gcXVlcnkudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzKy8pXG4gICAgY29uc3QgbWF0Y2hlZFRlcm1zOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBxdWVyeVRlcm1zLmZvckVhY2godGVybSA9PiB7XG4gICAgICBpZiAoZG9jLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkgfHxcbiAgICAgICAgICBkb2MuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSB8fFxuICAgICAgICAgIGRvYy50YWdzLnNvbWUodGFnID0+IHRhZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pKSkge1xuICAgICAgICBtYXRjaGVkVGVybXMucHVzaCh0ZXJtKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gbWF0Y2hlZFRlcm1zXG4gIH1cblxuICAvLyDrrLjshJwg7Jyg7IKs64+EIOqzhOyCsFxuICBwcml2YXRlIGNhbGN1bGF0ZVNpbWlsYXJpdHkoZG9jMTogRG9jdW1lbnRJbmZvLCBkb2MyOiBEb2N1bWVudEluZm8pOiBudW1iZXIge1xuICAgIC8vIO2DnOq3uCDsnKDsgqzrj4RcbiAgICBjb25zdCB0YWdzMSA9IG5ldyBTZXQoZG9jMS50YWdzKVxuICAgIGNvbnN0IHRhZ3MyID0gbmV3IFNldChkb2MyLnRhZ3MpXG4gICAgY29uc3QgY29tbW9uVGFncyA9IEFycmF5LmZyb20odGFnczEpLmZpbHRlcih0YWcgPT4gdGFnczIuaGFzKHRhZykpXG4gICAgY29uc3QgdGFnU2ltaWxhcml0eSA9IGNvbW1vblRhZ3MubGVuZ3RoIC8gTWF0aC5tYXgodGFnczEuc2l6ZSwgdGFnczIuc2l6ZSlcblxuICAgIC8vIOygnOuqqSDsnKDsgqzrj4QgKOqwhOuLqO2VnCDrrLjsnpDsl7Qg7Jyg7IKs64+EKVxuICAgIGNvbnN0IHRpdGxlU2ltaWxhcml0eSA9IHRoaXMuc3RyaW5nU2ltaWxhcml0eShkb2MxLnRpdGxlLCBkb2MyLnRpdGxlKVxuXG4gICAgcmV0dXJuICh0YWdTaW1pbGFyaXR5ICogMC42ICsgdGl0bGVTaW1pbGFyaXR5ICogMC40KVxuICB9XG5cbiAgLy8g66y47J6Q7Je0IOycoOyCrOuPhCDqs4TsgrAgKOqwhOuLqO2VnCDqtaztmIQpXG4gIHByaXZhdGUgc3RyaW5nU2ltaWxhcml0eShzdHIxOiBzdHJpbmcsIHN0cjI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgY29uc3Qgd29yZHMxID0gc3RyMS50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLylcbiAgICBjb25zdCB3b3JkczIgPSBzdHIyLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKVxuICAgIGNvbnN0IGNvbW1vbldvcmRzID0gd29yZHMxLmZpbHRlcih3b3JkID0+IHdvcmRzMi5pbmNsdWRlcyh3b3JkKSlcbiAgICByZXR1cm4gY29tbW9uV29yZHMubGVuZ3RoIC8gTWF0aC5tYXgod29yZHMxLmxlbmd0aCwgd29yZHMyLmxlbmd0aClcbiAgfVxuXG4gIC8vIOq0gOqzhCDsnKDtmJUg6rKw7KCVXG4gIHByaXZhdGUgZGV0ZXJtaW5lUmVsYXRpb25zaGlwKGRvYzE6IERvY3VtZW50SW5mbywgZG9jMjogRG9jdW1lbnRJbmZvKTogc3RyaW5nIHtcbiAgICBjb25zdCB0YWdzMSA9IG5ldyBTZXQoZG9jMS50YWdzKVxuICAgIGNvbnN0IHRhZ3MyID0gbmV3IFNldChkb2MyLnRhZ3MpXG4gICAgY29uc3QgY29tbW9uVGFncyA9IEFycmF5LmZyb20odGFnczEpLmZpbHRlcih0YWcgPT4gdGFnczIuaGFzKHRhZykpXG5cbiAgICBpZiAoY29tbW9uVGFncy5pbmNsdWRlcygnQVBJJykgJiYgY29tbW9uVGFncy5pbmNsdWRlcygn66y47IScJykpIHtcbiAgICAgIHJldHVybiAnQVBJIOusuOyEnCDqtIDqs4QnXG4gICAgfVxuICAgIGlmIChjb21tb25UYWdzLmluY2x1ZGVzKCfshKTsuZgnKSAmJiBjb21tb25UYWdzLmluY2x1ZGVzKCfqsJzrsJwnKSkge1xuICAgICAgcmV0dXJuICfqsJzrsJwg7ZmY6rK9IOq0gOqzhCdcbiAgICB9XG4gICAgaWYgKGNvbW1vblRhZ3MuaW5jbHVkZXMoJ+2UhOuhnOygne2KuCcpICYmIGNvbW1vblRhZ3MuaW5jbHVkZXMoJ+usuOyEnCcpKSB7XG4gICAgICByZXR1cm4gJ+2UhOuhnOygne2KuCDrrLjshJwg6rSA6rOEJ1xuICAgIH1cblxuICAgIHJldHVybiAn6rSA66CoIOusuOyEnCdcbiAgfVxufVxuXG4vLyDsi7HquIDthqQg7J247Iqk7YS07IqkXG5leHBvcnQgY29uc3QgYWlTZXJ2aWNlID0gbmV3IEFJU2VydmljZSgpXG4iXSwibmFtZXMiOlsiQUlTZXJ2aWNlIiwiZ2VuZXJhdGVUYWdzIiwiY29udGVudCIsInRpdGxlIiwibW9ja1RhZ3MiLCJrZXl3b3JkcyIsImV4dHJhY3RLZXl3b3JkcyIsImZvckVhY2giLCJrZXl3b3JkIiwiY29uZmlkZW5jZSIsIk1hdGgiLCJyYW5kb20iLCJwdXNoIiwidGFnIiwicmVhc29uIiwiY2F0ZWdvcmllcyIsImRldGVjdENhdGVnb3JpZXMiLCJjYXRlZ29yeSIsInNvcnQiLCJhIiwiYiIsInNlbWFudGljU2VhcmNoIiwicXVlcnkiLCJkb2N1bWVudHMiLCJyZXN1bHRzIiwiZG9jIiwicmVsZXZhbmNlU2NvcmUiLCJjYWxjdWxhdGVSZWxldmFuY2UiLCJtYXRjaGVkVGVybXMiLCJmaW5kTWF0Y2hlZFRlcm1zIiwiZ2VuZXJhdGVTdW1tYXJ5Iiwic2VudGVuY2VzIiwic3BsaXQiLCJmaWx0ZXIiLCJzIiwidHJpbSIsImxlbmd0aCIsInN1bW1hcnkiLCJzbGljZSIsImpvaW4iLCJhbmFseXplRG9jdW1lbnQiLCJkb2N1bWVudCIsImFsbERvY3VtZW50cyIsImRlc2NyaXB0aW9uIiwiYWlGcmllbmRsaW5lc3NTY29yZSIsImV2YWx1YXRlQUlGcmllbmRsaW5lc3MiLCJzdWdnZXN0ZWRUYWdzIiwicmVsYXRpb25zaGlwcyIsImFuYWx5emVEb2N1bWVudFJlbGF0aW9uc2hpcHMiLCJ0b3BpY3MiLCJleHRyYWN0VG9waWNzIiwic2VudGltZW50IiwiYW5hbHl6ZVNlbnRpbWVudCIsImltcHJvdmVtZW50cyIsImdlbmVyYXRlSW1wcm92ZW1lbnRzIiwic2NvcmUiLCJtZXRhZGF0YSIsImF1dGhvciIsInRhZ3MiLCJpbmNsdWRlcyIsIndvcmRDb3VudCIsIm1pbiIsInRleHQiLCJ0b0xvd2VyQ2FzZSIsInBvc2l0aXZlV29yZHMiLCJuZWdhdGl2ZVdvcmRzIiwicG9zaXRpdmVDb3VudCIsIndvcmQiLCJuZWdhdGl2ZUNvdW50IiwiYWlTY29yZSIsIm90aGVyRG9jIiwiaWQiLCJzaW1pbGFyaXR5IiwiY2FsY3VsYXRlU2ltaWxhcml0eSIsInRhcmdldCIsInJlbGF0aW9uc2hpcCIsImRldGVybWluZVJlbGF0aW9uc2hpcCIsInN0cmVuZ3RoIiwiYW5hbHl6ZUFsbERvY3VtZW50UmVsYXRpb25zaGlwcyIsImkiLCJqIiwiZG9jMSIsImRvYzIiLCJzb3VyY2UiLCJ3b3JkcyIsInJlcGxhY2UiLCJNYXAiLCJzZXQiLCJnZXQiLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwiXyIsImNvdW50IiwibWFwIiwicXVlcnlUZXJtcyIsInRlcm0iLCJzb21lIiwidGFnczEiLCJTZXQiLCJ0YWdzMiIsImNvbW1vblRhZ3MiLCJoYXMiLCJ0YWdTaW1pbGFyaXR5IiwibWF4Iiwic2l6ZSIsInRpdGxlU2ltaWxhcml0eSIsInN0cmluZ1NpbWlsYXJpdHkiLCJzdHIxIiwic3RyMiIsIndvcmRzMSIsIndvcmRzMiIsImNvbW1vbldvcmRzIiwiY29uc3RydWN0b3IiLCJhcGlLZXkiLCJhaVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/ai-service.ts\n"));

/***/ })

});