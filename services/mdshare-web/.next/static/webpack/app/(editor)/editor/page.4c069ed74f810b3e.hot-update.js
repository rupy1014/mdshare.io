"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(editor)/editor/page",{

/***/ "(app-pages-browser)/./src/lib/ai-service.ts":
/*!*******************************!*\
  !*** ./src/lib/ai-service.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIService: () => (/* binding */ AIService),\n/* harmony export */   aiService: () => (/* binding */ aiService)\n/* harmony export */ });\nclass AIService {\n    // 자동 태그 생성 (Mock 구현)\n    async generateTags(content, title) {\n        // 실제로는 OpenAI API를 사용하지만, 여기서는 Mock 구현\n        const mockTags = [];\n        // 키워드 기반 태그 생성\n        const keywords = this.extractKeywords(content + ' ' + title);\n        keywords.forEach((keyword)=>{\n            const confidence = Math.random() * 0.4 + 0.6 // 0.6-1.0\n            ;\n            mockTags.push({\n                tag: keyword,\n                confidence,\n                reason: '문서에서 \"'.concat(keyword, '\" 키워드가 자주 사용됨')\n            });\n        });\n        // 카테고리 기반 태그 생성\n        const categories = this.detectCategories(content);\n        categories.forEach((category)=>{\n            mockTags.push({\n                tag: category,\n                confidence: Math.random() * 0.3 + 0.7,\n                reason: '문서 내용이 \"'.concat(category, '\" 카테고리에 해당함')\n            });\n        });\n        return mockTags.sort((a, b)=>b.confidence - a.confidence);\n    }\n    // 의미론적 검색 (Mock 구현)\n    async semanticSearch(query, documents) {\n        const results = [];\n        documents.forEach((doc)=>{\n            const relevanceScore = this.calculateRelevance(query, doc);\n            if (relevanceScore > 0.1) {\n                results.push({\n                    ...doc,\n                    relevanceScore,\n                    matchedTerms: this.findMatchedTerms(query, doc)\n                });\n            }\n        });\n        return results.sort((a, b)=>b.relevanceScore - a.relevanceScore);\n    }\n    // 문서 요약 생성\n    async generateSummary(content) {\n        // Mock 구현 - 실제로는 AI API 사용\n        const sentences = content.split(/[.!?]+/).filter((s)=>s.trim().length > 10);\n        const summary = sentences.slice(0, 2).join('. ');\n        return summary + (sentences.length > 2 ? '...' : '');\n    }\n    // 종합적인 문서 AI 분석\n    async analyzeDocument(document, allDocuments) {\n        const content = \"\".concat(document.title, \" \").concat(document.description);\n        // AI 친화도 평가\n        const aiFriendlinessScore = await this.evaluateAIFriendliness(document);\n        // 자동 태그 생성\n        const suggestedTags = await this.generateTags(content, document.title);\n        // 문서 관계 분석\n        const relationships = await this.analyzeDocumentRelationships(document, allDocuments);\n        // 주제 추출\n        const topics = await this.extractTopics(content);\n        // 감정 분석\n        const sentiment = await this.analyzeSentiment(content);\n        // 개선 제안 생성\n        const improvements = await this.generateImprovements(document, aiFriendlinessScore, suggestedTags);\n        return {\n            aiFriendlinessScore,\n            suggestedTags,\n            relationships,\n            improvements,\n            topics,\n            sentiment\n        };\n    }\n    // AI 친화도 평가\n    async evaluateAIFriendliness(document) {\n        var _document_metadata, _document_metadata1;\n        let score = 0;\n        // Frontmatter 완성도 (30점)\n        if ((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.author) score += 10;\n        if (document.tags && document.tags.length > 0) score += 10;\n        if (document.description && document.description.length > 10) score += 10;\n        // 구조화 수준 (30점)\n        if (document.title && document.title.length > 5) score += 15;\n        if (document.description && document.description.includes('.')) score += 15;\n        // 내용 명확성 (20점)\n        if (document.description && document.description.length > 50) score += 10;\n        if (((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.wordCount) && document.metadata.wordCount > 100) score += 10;\n        // 태그 및 관계 (20점)\n        if (document.tags && document.tags.length >= 3) score += 10;\n        if (document.tags && document.tags.length >= 5) score += 10;\n        return Math.min(score, 100);\n    }\n    // 주제 추출\n    async extractTopics(content) {\n        const topics = [];\n        const text = content.toLowerCase();\n        // 기술 주제\n        if (text.includes('react') || text.includes('nextjs')) topics.push('React/Next.js');\n        if (text.includes('typescript') || text.includes('javascript')) topics.push('JavaScript/TypeScript');\n        if (text.includes('api') || text.includes('rest')) topics.push('API 개발');\n        if (text.includes('database') || text.includes('db')) topics.push('데이터베이스');\n        if (text.includes('ai') || text.includes('machine learning')) topics.push('AI/ML');\n        // 도메인 주제\n        if (text.includes('설치') || text.includes('setup')) topics.push('환경 설정');\n        if (text.includes('배포') || text.includes('deploy')) topics.push('배포');\n        if (text.includes('테스트') || text.includes('test')) topics.push('테스팅');\n        if (text.includes('보안') || text.includes('security')) topics.push('보안');\n        if (text.includes('성능') || text.includes('performance')) topics.push('성능 최적화');\n        return topics.slice(0, 5) // 최대 5개 주제\n        ;\n    }\n    // 감정 분석\n    async analyzeSentiment(content) {\n        const text = content.toLowerCase();\n        const positiveWords = [\n            '좋다',\n            '훌륭',\n            '완벽',\n            '성공',\n            '효과적',\n            '쉽다',\n            '빠르다',\n            '안정적'\n        ];\n        const negativeWords = [\n            '문제',\n            '오류',\n            '실패',\n            '어렵다',\n            '느리다',\n            '불안정',\n            '복잡'\n        ];\n        const positiveCount = positiveWords.filter((word)=>text.includes(word)).length;\n        const negativeCount = negativeWords.filter((word)=>text.includes(word)).length;\n        if (positiveCount > negativeCount) return 'positive';\n        if (negativeCount > positiveCount) return 'negative';\n        return 'neutral';\n    }\n    // 개선 제안 생성\n    async generateImprovements(document, aiScore, suggestedTags) {\n        var _document_metadata;\n        const improvements = [];\n        if (aiScore < 70) {\n            var _document_metadata1;\n            if (!((_document_metadata1 = document.metadata) === null || _document_metadata1 === void 0 ? void 0 : _document_metadata1.author)) {\n                improvements.push('작성자 정보를 추가하여 신뢰성을 높이세요');\n            }\n            if (!document.tags || document.tags.length < 3) {\n                improvements.push('더 많은 태그를 추가하여 검색 가능성을 높이세요');\n            }\n            if (!document.description || document.description.length < 50) {\n                improvements.push('문서 설명을 더 자세히 작성하여 이해도를 높이세요');\n            }\n        }\n        if (suggestedTags.length > 0) {\n            improvements.push(\"\".concat(suggestedTags.length, \"개의 AI 추천 태그를 적용해보세요\"));\n        }\n        if (((_document_metadata = document.metadata) === null || _document_metadata === void 0 ? void 0 : _document_metadata.wordCount) && document.metadata.wordCount < 100) {\n            improvements.push('문서 내용을 더 풍부하게 작성해보세요');\n        }\n        if (!document.description || !document.description.includes('.')) {\n            improvements.push('문서 설명에 완전한 문장을 사용해보세요');\n        }\n        return improvements.slice(0, 4) // 최대 4개 제안\n        ;\n    }\n    // 문서 관계 분석 (개별 문서용)\n    async analyzeDocumentRelationships(document, allDocuments) {\n        const relationships = [];\n        for (const otherDoc of allDocuments){\n            if (otherDoc.id === document.id) continue;\n            const similarity = this.calculateSimilarity(document, otherDoc);\n            if (similarity > 0.3) {\n                relationships.push({\n                    target: otherDoc.title,\n                    relationship: this.determineRelationship(document, otherDoc),\n                    strength: similarity\n                });\n            }\n        }\n        return relationships.slice(0, 3) // 최대 3개 관계만 표시\n        ;\n    }\n    // 문서 관계 분석 (전체 문서용)\n    async analyzeAllDocumentRelationships(documents) {\n        const relationships = [];\n        for(let i = 0; i < documents.length; i++){\n            for(let j = i + 1; j < documents.length; j++){\n                const doc1 = documents[i];\n                const doc2 = documents[j];\n                const similarity = this.calculateSimilarity(doc1, doc2);\n                if (similarity > 0.3) {\n                    relationships.push({\n                        source: doc1.title,\n                        target: doc2.title,\n                        relationship: this.determineRelationship(doc1, doc2),\n                        strength: similarity\n                    });\n                }\n            }\n        }\n        return relationships;\n    }\n    // 키워드 추출 (Mock)\n    extractKeywords(text) {\n        const words = text.toLowerCase().replace(/[^\\w\\s가-힣]/g, ' ').split(/\\s+/).filter((word)=>word.length > 2);\n        const wordCount = new Map();\n        words.forEach((word)=>{\n            wordCount.set(word, (wordCount.get(word) || 0) + 1);\n        });\n        return Array.from(wordCount.entries()).filter((param)=>{\n            let [_, count] = param;\n            return count > 1;\n        }).sort((param, param1)=>{\n            let [, a] = param, [, b] = param1;\n            return b - a;\n        }).slice(0, 5).map((param)=>{\n            let [word, _] = param;\n            return word;\n        });\n    }\n    // 카테고리 감지 (Mock)\n    detectCategories(content) {\n        const categories = [];\n        const text = content.toLowerCase();\n        if (text.includes('api') || text.includes('endpoint') || text.includes('rest')) {\n            categories.push('API');\n        }\n        if (text.includes('설치') || text.includes('setup') || text.includes('환경')) {\n            categories.push('설치');\n        }\n        if (text.includes('문서') || text.includes('documentation') || text.includes('가이드')) {\n            categories.push('문서');\n        }\n        if (text.includes('프로젝트') || text.includes('project') || text.includes('개요')) {\n            categories.push('프로젝트');\n        }\n        if (text.includes('개발') || text.includes('development') || text.includes('코드')) {\n            categories.push('개발');\n        }\n        return categories;\n    }\n    // 관련성 계산 (Mock)\n    calculateRelevance(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        let score = 0;\n        // 제목 매칭 (높은 가중치)\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term)) {\n                score += 0.4;\n            }\n            if (doc.description.toLowerCase().includes(term)) {\n                score += 0.2;\n            }\n            if (doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                score += 0.3;\n            }\n        });\n        return Math.min(score, 1.0);\n    }\n    // 매칭된 용어 찾기\n    findMatchedTerms(query, doc) {\n        const queryTerms = query.toLowerCase().split(/\\s+/);\n        const matchedTerms = [];\n        queryTerms.forEach((term)=>{\n            if (doc.title.toLowerCase().includes(term) || doc.description.toLowerCase().includes(term) || doc.tags.some((tag)=>tag.toLowerCase().includes(term))) {\n                matchedTerms.push(term);\n            }\n        });\n        return matchedTerms;\n    }\n    // 문서 유사도 계산\n    calculateSimilarity(doc1, doc2) {\n        // 태그 유사도\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = new Set([\n            ...tags1\n        ].filter((tag)=>tags2.has(tag)));\n        const tagSimilarity = commonTags.size / Math.max(tags1.size, tags2.size);\n        // 제목 유사도 (간단한 문자열 유사도)\n        const titleSimilarity = this.stringSimilarity(doc1.title, doc2.title);\n        return tagSimilarity * 0.6 + titleSimilarity * 0.4;\n    }\n    // 문자열 유사도 계산 (간단한 구현)\n    stringSimilarity(str1, str2) {\n        const words1 = str1.toLowerCase().split(/\\s+/);\n        const words2 = str2.toLowerCase().split(/\\s+/);\n        const commonWords = words1.filter((word)=>words2.includes(word));\n        return commonWords.length / Math.max(words1.length, words2.length);\n    }\n    // 관계 유형 결정\n    determineRelationship(doc1, doc2) {\n        const tags1 = new Set(doc1.tags);\n        const tags2 = new Set(doc2.tags);\n        const commonTags = [\n            ...tags1\n        ].filter((tag)=>tags2.has(tag));\n        if (commonTags.includes('API') && commonTags.includes('문서')) {\n            return 'API 문서 관계';\n        }\n        if (commonTags.includes('설치') && commonTags.includes('개발')) {\n            return '개발 환경 관계';\n        }\n        if (commonTags.includes('프로젝트') && commonTags.includes('문서')) {\n            return '프로젝트 문서 관계';\n        }\n        return '관련 문서';\n    }\n    constructor(apiKey){\n        this.apiKey = null;\n        this.apiKey = apiKey || null;\n    }\n}\n// 싱글톤 인스턴스\nconst aiService = new AIService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvYWktc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQTBCTyxNQUFNQTtJQU9YLHFCQUFxQjtJQUNyQixNQUFNQyxhQUFhQyxPQUFlLEVBQUVDLEtBQWEsRUFBOEI7UUFDN0UsdUNBQXVDO1FBQ3ZDLE1BQU1DLFdBQThCLEVBQUU7UUFFdEMsZUFBZTtRQUNmLE1BQU1DLFdBQVcsSUFBSSxDQUFDQyxlQUFlLENBQUNKLFVBQVUsTUFBTUM7UUFFdERFLFNBQVNFLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDZixNQUFNQyxhQUFhQyxLQUFLQyxNQUFNLEtBQUssTUFBTSxJQUFJLFVBQVU7O1lBQ3ZEUCxTQUFTUSxJQUFJLENBQUM7Z0JBQ1pDLEtBQUtMO2dCQUNMQztnQkFDQUssUUFBUSxTQUFpQixPQUFSTixTQUFRO1lBQzNCO1FBQ0Y7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTU8sYUFBYSxJQUFJLENBQUNDLGdCQUFnQixDQUFDZDtRQUN6Q2EsV0FBV1IsT0FBTyxDQUFDVSxDQUFBQTtZQUNqQmIsU0FBU1EsSUFBSSxDQUFDO2dCQUNaQyxLQUFLSTtnQkFDTFIsWUFBWUMsS0FBS0MsTUFBTSxLQUFLLE1BQU07Z0JBQ2xDRyxRQUFRLFdBQW9CLE9BQVRHLFVBQVM7WUFDOUI7UUFDRjtRQUVBLE9BQU9iLFNBQVNjLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNQSxFQUFFWCxVQUFVLEdBQUdVLEVBQUVWLFVBQVU7SUFDNUQ7SUFFQSxvQkFBb0I7SUFDcEIsTUFBTVksZUFBZUMsS0FBYSxFQUFFQyxTQUF5QixFQUE2QjtRQUN4RixNQUFNQyxVQUE0QixFQUFFO1FBRXBDRCxVQUFVaEIsT0FBTyxDQUFDa0IsQ0FBQUE7WUFDaEIsTUFBTUMsaUJBQWlCLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNMLE9BQU9HO1lBQ3RELElBQUlDLGlCQUFpQixLQUFLO2dCQUN4QkYsUUFBUVosSUFBSSxDQUFDO29CQUNYLEdBQUdhLEdBQUc7b0JBQ05DO29CQUNBRSxjQUFjLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNQLE9BQU9HO2dCQUM3QztZQUNGO1FBQ0Y7UUFFQSxPQUFPRCxRQUFRTixJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRU0sY0FBYyxHQUFHUCxFQUFFTyxjQUFjO0lBQ25FO0lBRUEsV0FBVztJQUNYLE1BQU1JLGdCQUFnQjVCLE9BQWUsRUFBbUI7UUFDdEQsMkJBQTJCO1FBQzNCLE1BQU02QixZQUFZN0IsUUFBUThCLEtBQUssQ0FBQyxVQUFVQyxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLElBQUksR0FBR0MsTUFBTSxHQUFHO1FBQ3hFLE1BQU1DLFVBQVVOLFVBQVVPLEtBQUssQ0FBQyxHQUFHLEdBQUdDLElBQUksQ0FBQztRQUMzQyxPQUFPRixVQUFXTixDQUFBQSxVQUFVSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUM7SUFDcEQ7SUFFQSxnQkFBZ0I7SUFDaEIsTUFBTUksZ0JBQWdCQyxRQUFzQixFQUFFQyxZQUE0QixFQUErQjtRQUN2RyxNQUFNeEMsVUFBVSxHQUFxQnVDLE9BQWxCQSxTQUFTdEMsS0FBSyxFQUFDLEtBQXdCLE9BQXJCc0MsU0FBU0UsV0FBVztRQUV6RCxZQUFZO1FBQ1osTUFBTUMsc0JBQXNCLE1BQU0sSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ0o7UUFFOUQsV0FBVztRQUNYLE1BQU1LLGdCQUFnQixNQUFNLElBQUksQ0FBQzdDLFlBQVksQ0FBQ0MsU0FBU3VDLFNBQVN0QyxLQUFLO1FBRXJFLFdBQVc7UUFDWCxNQUFNNEMsZ0JBQWdCLE1BQU0sSUFBSSxDQUFDQyw0QkFBNEIsQ0FBQ1AsVUFBVUM7UUFFeEUsUUFBUTtRQUNSLE1BQU1PLFNBQVMsTUFBTSxJQUFJLENBQUNDLGFBQWEsQ0FBQ2hEO1FBRXhDLFFBQVE7UUFDUixNQUFNaUQsWUFBWSxNQUFNLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNsRDtRQUU5QyxXQUFXO1FBQ1gsTUFBTW1ELGVBQWUsTUFBTSxJQUFJLENBQUNDLG9CQUFvQixDQUFDYixVQUFVRyxxQkFBcUJFO1FBRXBGLE9BQU87WUFDTEY7WUFDQUU7WUFDQUM7WUFDQU07WUFDQUo7WUFDQUU7UUFDRjtJQUNGO0lBRUEsWUFBWTtJQUNaLE1BQU1OLHVCQUF1QkosUUFBc0IsRUFBbUI7WUFJaEVBLG9CQVVBQTtRQWJKLElBQUljLFFBQVE7UUFFWix3QkFBd0I7UUFDeEIsS0FBSWQscUJBQUFBLFNBQVNlLFFBQVEsY0FBakJmLHlDQUFBQSxtQkFBbUJnQixNQUFNLEVBQUVGLFNBQVM7UUFDeEMsSUFBSWQsU0FBU2lCLElBQUksSUFBSWpCLFNBQVNpQixJQUFJLENBQUN0QixNQUFNLEdBQUcsR0FBR21CLFNBQVM7UUFDeEQsSUFBSWQsU0FBU0UsV0FBVyxJQUFJRixTQUFTRSxXQUFXLENBQUNQLE1BQU0sR0FBRyxJQUFJbUIsU0FBUztRQUV2RSxlQUFlO1FBQ2YsSUFBSWQsU0FBU3RDLEtBQUssSUFBSXNDLFNBQVN0QyxLQUFLLENBQUNpQyxNQUFNLEdBQUcsR0FBR21CLFNBQVM7UUFDMUQsSUFBSWQsU0FBU0UsV0FBVyxJQUFJRixTQUFTRSxXQUFXLENBQUNnQixRQUFRLENBQUMsTUFBTUosU0FBUztRQUV6RSxlQUFlO1FBQ2YsSUFBSWQsU0FBU0UsV0FBVyxJQUFJRixTQUFTRSxXQUFXLENBQUNQLE1BQU0sR0FBRyxJQUFJbUIsU0FBUztRQUN2RSxJQUFJZCxFQUFBQSxzQkFBQUEsU0FBU2UsUUFBUSxjQUFqQmYsMENBQUFBLG9CQUFtQm1CLFNBQVMsS0FBSW5CLFNBQVNlLFFBQVEsQ0FBQ0ksU0FBUyxHQUFHLEtBQUtMLFNBQVM7UUFFaEYsZ0JBQWdCO1FBQ2hCLElBQUlkLFNBQVNpQixJQUFJLElBQUlqQixTQUFTaUIsSUFBSSxDQUFDdEIsTUFBTSxJQUFJLEdBQUdtQixTQUFTO1FBQ3pELElBQUlkLFNBQVNpQixJQUFJLElBQUlqQixTQUFTaUIsSUFBSSxDQUFDdEIsTUFBTSxJQUFJLEdBQUdtQixTQUFTO1FBRXpELE9BQU83QyxLQUFLbUQsR0FBRyxDQUFDTixPQUFPO0lBQ3pCO0lBRUEsUUFBUTtJQUNSLE1BQU1MLGNBQWNoRCxPQUFlLEVBQXFCO1FBQ3RELE1BQU0rQyxTQUFtQixFQUFFO1FBQzNCLE1BQU1hLE9BQU81RCxRQUFRNkQsV0FBVztRQUVoQyxRQUFRO1FBQ1IsSUFBSUQsS0FBS0gsUUFBUSxDQUFDLFlBQVlHLEtBQUtILFFBQVEsQ0FBQyxXQUFXVixPQUFPckMsSUFBSSxDQUFDO1FBQ25FLElBQUlrRCxLQUFLSCxRQUFRLENBQUMsaUJBQWlCRyxLQUFLSCxRQUFRLENBQUMsZUFBZVYsT0FBT3JDLElBQUksQ0FBQztRQUM1RSxJQUFJa0QsS0FBS0gsUUFBUSxDQUFDLFVBQVVHLEtBQUtILFFBQVEsQ0FBQyxTQUFTVixPQUFPckMsSUFBSSxDQUFDO1FBQy9ELElBQUlrRCxLQUFLSCxRQUFRLENBQUMsZUFBZUcsS0FBS0gsUUFBUSxDQUFDLE9BQU9WLE9BQU9yQyxJQUFJLENBQUM7UUFDbEUsSUFBSWtELEtBQUtILFFBQVEsQ0FBQyxTQUFTRyxLQUFLSCxRQUFRLENBQUMscUJBQXFCVixPQUFPckMsSUFBSSxDQUFDO1FBRTFFLFNBQVM7UUFDVCxJQUFJa0QsS0FBS0gsUUFBUSxDQUFDLFNBQVNHLEtBQUtILFFBQVEsQ0FBQyxVQUFVVixPQUFPckMsSUFBSSxDQUFDO1FBQy9ELElBQUlrRCxLQUFLSCxRQUFRLENBQUMsU0FBU0csS0FBS0gsUUFBUSxDQUFDLFdBQVdWLE9BQU9yQyxJQUFJLENBQUM7UUFDaEUsSUFBSWtELEtBQUtILFFBQVEsQ0FBQyxVQUFVRyxLQUFLSCxRQUFRLENBQUMsU0FBU1YsT0FBT3JDLElBQUksQ0FBQztRQUMvRCxJQUFJa0QsS0FBS0gsUUFBUSxDQUFDLFNBQVNHLEtBQUtILFFBQVEsQ0FBQyxhQUFhVixPQUFPckMsSUFBSSxDQUFDO1FBQ2xFLElBQUlrRCxLQUFLSCxRQUFRLENBQUMsU0FBU0csS0FBS0gsUUFBUSxDQUFDLGdCQUFnQlYsT0FBT3JDLElBQUksQ0FBQztRQUVyRSxPQUFPcUMsT0FBT1gsS0FBSyxDQUFDLEdBQUcsR0FBRyxXQUFXOztJQUN2QztJQUVBLFFBQVE7SUFDUixNQUFNYyxpQkFBaUJsRCxPQUFlLEVBQWdEO1FBQ3BGLE1BQU00RCxPQUFPNUQsUUFBUTZELFdBQVc7UUFFaEMsTUFBTUMsZ0JBQWdCO1lBQUM7WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFPO1lBQU07WUFBTztTQUFNO1FBQ3pFLE1BQU1DLGdCQUFnQjtZQUFDO1lBQU07WUFBTTtZQUFNO1lBQU87WUFBTztZQUFPO1NBQUs7UUFFbkUsTUFBTUMsZ0JBQWdCRixjQUFjL0IsTUFBTSxDQUFDa0MsQ0FBQUEsT0FBUUwsS0FBS0gsUUFBUSxDQUFDUSxPQUFPL0IsTUFBTTtRQUM5RSxNQUFNZ0MsZ0JBQWdCSCxjQUFjaEMsTUFBTSxDQUFDa0MsQ0FBQUEsT0FBUUwsS0FBS0gsUUFBUSxDQUFDUSxPQUFPL0IsTUFBTTtRQUU5RSxJQUFJOEIsZ0JBQWdCRSxlQUFlLE9BQU87UUFDMUMsSUFBSUEsZ0JBQWdCRixlQUFlLE9BQU87UUFDMUMsT0FBTztJQUNUO0lBRUEsV0FBVztJQUNYLE1BQU1aLHFCQUNKYixRQUFzQixFQUN0QjRCLE9BQWUsRUFDZnZCLGFBQWdDLEVBQ2I7WUFtQmZMO1FBbEJKLE1BQU1ZLGVBQXlCLEVBQUU7UUFFakMsSUFBSWdCLFVBQVUsSUFBSTtnQkFDWDVCO1lBQUwsSUFBSSxHQUFDQSxzQkFBQUEsU0FBU2UsUUFBUSxjQUFqQmYsMENBQUFBLG9CQUFtQmdCLE1BQU0sR0FBRTtnQkFDOUJKLGFBQWF6QyxJQUFJLENBQUM7WUFDcEI7WUFDQSxJQUFJLENBQUM2QixTQUFTaUIsSUFBSSxJQUFJakIsU0FBU2lCLElBQUksQ0FBQ3RCLE1BQU0sR0FBRyxHQUFHO2dCQUM5Q2lCLGFBQWF6QyxJQUFJLENBQUM7WUFDcEI7WUFDQSxJQUFJLENBQUM2QixTQUFTRSxXQUFXLElBQUlGLFNBQVNFLFdBQVcsQ0FBQ1AsTUFBTSxHQUFHLElBQUk7Z0JBQzdEaUIsYUFBYXpDLElBQUksQ0FBQztZQUNwQjtRQUNGO1FBRUEsSUFBSWtDLGNBQWNWLE1BQU0sR0FBRyxHQUFHO1lBQzVCaUIsYUFBYXpDLElBQUksQ0FBQyxHQUF3QixPQUFyQmtDLGNBQWNWLE1BQU0sRUFBQztRQUM1QztRQUVBLElBQUlLLEVBQUFBLHFCQUFBQSxTQUFTZSxRQUFRLGNBQWpCZix5Q0FBQUEsbUJBQW1CbUIsU0FBUyxLQUFJbkIsU0FBU2UsUUFBUSxDQUFDSSxTQUFTLEdBQUcsS0FBSztZQUNyRVAsYUFBYXpDLElBQUksQ0FBQztRQUNwQjtRQUVBLElBQUksQ0FBQzZCLFNBQVNFLFdBQVcsSUFBSSxDQUFDRixTQUFTRSxXQUFXLENBQUNnQixRQUFRLENBQUMsTUFBTTtZQUNoRU4sYUFBYXpDLElBQUksQ0FBQztRQUNwQjtRQUVBLE9BQU95QyxhQUFhZixLQUFLLENBQUMsR0FBRyxHQUFHLFdBQVc7O0lBQzdDO0lBRUEsb0JBQW9CO0lBQ3BCLE1BQU1VLDZCQUE2QlAsUUFBc0IsRUFBRUMsWUFBNEIsRUFJbkY7UUFDRixNQUFNSyxnQkFJRCxFQUFFO1FBRVAsS0FBSyxNQUFNdUIsWUFBWTVCLGFBQWM7WUFDbkMsSUFBSTRCLFNBQVNDLEVBQUUsS0FBSzlCLFNBQVM4QixFQUFFLEVBQUU7WUFFakMsTUFBTUMsYUFBYSxJQUFJLENBQUNDLG1CQUFtQixDQUFDaEMsVUFBVTZCO1lBQ3RELElBQUlFLGFBQWEsS0FBSztnQkFDcEJ6QixjQUFjbkMsSUFBSSxDQUFDO29CQUNqQjhELFFBQVFKLFNBQVNuRSxLQUFLO29CQUN0QndFLGNBQWMsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQ25DLFVBQVU2QjtvQkFDbkRPLFVBQVVMO2dCQUNaO1lBQ0Y7UUFDRjtRQUVBLE9BQU96QixjQUFjVCxLQUFLLENBQUMsR0FBRyxHQUFHLGVBQWU7O0lBQ2xEO0lBRUEsb0JBQW9CO0lBQ3BCLE1BQU13QyxnQ0FBZ0N2RCxTQUF5QixFQUszRDtRQUNGLE1BQU13QixnQkFLRCxFQUFFO1FBRVAsSUFBSyxJQUFJZ0MsSUFBSSxHQUFHQSxJQUFJeEQsVUFBVWEsTUFBTSxFQUFFMkMsSUFBSztZQUN6QyxJQUFLLElBQUlDLElBQUlELElBQUksR0FBR0MsSUFBSXpELFVBQVVhLE1BQU0sRUFBRTRDLElBQUs7Z0JBQzdDLE1BQU1DLE9BQU8xRCxTQUFTLENBQUN3RCxFQUFFO2dCQUN6QixNQUFNRyxPQUFPM0QsU0FBUyxDQUFDeUQsRUFBRTtnQkFFekIsTUFBTVIsYUFBYSxJQUFJLENBQUNDLG1CQUFtQixDQUFDUSxNQUFNQztnQkFDbEQsSUFBSVYsYUFBYSxLQUFLO29CQUNwQnpCLGNBQWNuQyxJQUFJLENBQUM7d0JBQ2pCdUUsUUFBUUYsS0FBSzlFLEtBQUs7d0JBQ2xCdUUsUUFBUVEsS0FBSy9FLEtBQUs7d0JBQ2xCd0UsY0FBYyxJQUFJLENBQUNDLHFCQUFxQixDQUFDSyxNQUFNQzt3QkFDL0NMLFVBQVVMO29CQUNaO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE9BQU96QjtJQUNUO0lBRUEsZ0JBQWdCO0lBQ1J6QyxnQkFBZ0J3RCxJQUFZLEVBQVk7UUFDOUMsTUFBTXNCLFFBQVF0QixLQUFLQyxXQUFXLEdBQzNCc0IsT0FBTyxDQUFDLGVBQWUsS0FDdkJyRCxLQUFLLENBQUMsT0FDTkMsTUFBTSxDQUFDa0MsQ0FBQUEsT0FBUUEsS0FBSy9CLE1BQU0sR0FBRztRQUVoQyxNQUFNd0IsWUFBWSxJQUFJMEI7UUFDdEJGLE1BQU03RSxPQUFPLENBQUM0RCxDQUFBQTtZQUNaUCxVQUFVMkIsR0FBRyxDQUFDcEIsTUFBTSxDQUFDUCxVQUFVNEIsR0FBRyxDQUFDckIsU0FBUyxLQUFLO1FBQ25EO1FBRUEsT0FBT3NCLE1BQU1DLElBQUksQ0FBQzlCLFVBQVUrQixPQUFPLElBQ2hDMUQsTUFBTSxDQUFDO2dCQUFDLENBQUMyRCxHQUFHQyxNQUFNO21CQUFLQSxRQUFRO1dBQy9CM0UsSUFBSSxDQUFDO2dCQUFDLEdBQUdDLEVBQUUsVUFBRSxHQUFHQyxFQUFFO21CQUFLQSxJQUFJRDtXQUMzQm1CLEtBQUssQ0FBQyxHQUFHLEdBQ1R3RCxHQUFHLENBQUM7Z0JBQUMsQ0FBQzNCLE1BQU15QixFQUFFO21CQUFLekI7O0lBQ3hCO0lBRUEsaUJBQWlCO0lBQ1RuRCxpQkFBaUJkLE9BQWUsRUFBWTtRQUNsRCxNQUFNYSxhQUF1QixFQUFFO1FBQy9CLE1BQU0rQyxPQUFPNUQsUUFBUTZELFdBQVc7UUFFaEMsSUFBSUQsS0FBS0gsUUFBUSxDQUFDLFVBQVVHLEtBQUtILFFBQVEsQ0FBQyxlQUFlRyxLQUFLSCxRQUFRLENBQUMsU0FBUztZQUM5RTVDLFdBQVdILElBQUksQ0FBQztRQUNsQjtRQUNBLElBQUlrRCxLQUFLSCxRQUFRLENBQUMsU0FBU0csS0FBS0gsUUFBUSxDQUFDLFlBQVlHLEtBQUtILFFBQVEsQ0FBQyxPQUFPO1lBQ3hFNUMsV0FBV0gsSUFBSSxDQUFDO1FBQ2xCO1FBQ0EsSUFBSWtELEtBQUtILFFBQVEsQ0FBQyxTQUFTRyxLQUFLSCxRQUFRLENBQUMsb0JBQW9CRyxLQUFLSCxRQUFRLENBQUMsUUFBUTtZQUNqRjVDLFdBQVdILElBQUksQ0FBQztRQUNsQjtRQUNBLElBQUlrRCxLQUFLSCxRQUFRLENBQUMsV0FBV0csS0FBS0gsUUFBUSxDQUFDLGNBQWNHLEtBQUtILFFBQVEsQ0FBQyxPQUFPO1lBQzVFNUMsV0FBV0gsSUFBSSxDQUFDO1FBQ2xCO1FBQ0EsSUFBSWtELEtBQUtILFFBQVEsQ0FBQyxTQUFTRyxLQUFLSCxRQUFRLENBQUMsa0JBQWtCRyxLQUFLSCxRQUFRLENBQUMsT0FBTztZQUM5RTVDLFdBQVdILElBQUksQ0FBQztRQUNsQjtRQUVBLE9BQU9HO0lBQ1Q7SUFFQSxnQkFBZ0I7SUFDUlksbUJBQW1CTCxLQUFhLEVBQUVHLEdBQWlCLEVBQVU7UUFDbkUsTUFBTXNFLGFBQWF6RSxNQUFNeUMsV0FBVyxHQUFHL0IsS0FBSyxDQUFDO1FBQzdDLElBQUl1QixRQUFRO1FBRVosaUJBQWlCO1FBQ2pCd0MsV0FBV3hGLE9BQU8sQ0FBQ3lGLENBQUFBO1lBQ2pCLElBQUl2RSxJQUFJdEIsS0FBSyxDQUFDNEQsV0FBVyxHQUFHSixRQUFRLENBQUNxQyxPQUFPO2dCQUMxQ3pDLFNBQVM7WUFDWDtZQUNBLElBQUk5QixJQUFJa0IsV0FBVyxDQUFDb0IsV0FBVyxHQUFHSixRQUFRLENBQUNxQyxPQUFPO2dCQUNoRHpDLFNBQVM7WUFDWDtZQUNBLElBQUk5QixJQUFJaUMsSUFBSSxDQUFDdUMsSUFBSSxDQUFDcEYsQ0FBQUEsTUFBT0EsSUFBSWtELFdBQVcsR0FBR0osUUFBUSxDQUFDcUMsUUFBUTtnQkFDMUR6QyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE9BQU83QyxLQUFLbUQsR0FBRyxDQUFDTixPQUFPO0lBQ3pCO0lBRUEsWUFBWTtJQUNKMUIsaUJBQWlCUCxLQUFhLEVBQUVHLEdBQWlCLEVBQVk7UUFDbkUsTUFBTXNFLGFBQWF6RSxNQUFNeUMsV0FBVyxHQUFHL0IsS0FBSyxDQUFDO1FBQzdDLE1BQU1KLGVBQXlCLEVBQUU7UUFFakNtRSxXQUFXeEYsT0FBTyxDQUFDeUYsQ0FBQUE7WUFDakIsSUFBSXZFLElBQUl0QixLQUFLLENBQUM0RCxXQUFXLEdBQUdKLFFBQVEsQ0FBQ3FDLFNBQ2pDdkUsSUFBSWtCLFdBQVcsQ0FBQ29CLFdBQVcsR0FBR0osUUFBUSxDQUFDcUMsU0FDdkN2RSxJQUFJaUMsSUFBSSxDQUFDdUMsSUFBSSxDQUFDcEYsQ0FBQUEsTUFBT0EsSUFBSWtELFdBQVcsR0FBR0osUUFBUSxDQUFDcUMsUUFBUTtnQkFDMURwRSxhQUFhaEIsSUFBSSxDQUFDb0Y7WUFDcEI7UUFDRjtRQUVBLE9BQU9wRTtJQUNUO0lBRUEsWUFBWTtJQUNKNkMsb0JBQW9CUSxJQUFrQixFQUFFQyxJQUFrQixFQUFVO1FBQzFFLFNBQVM7UUFDVCxNQUFNZ0IsUUFBUSxJQUFJQyxJQUFJbEIsS0FBS3ZCLElBQUk7UUFDL0IsTUFBTTBDLFFBQVEsSUFBSUQsSUFBSWpCLEtBQUt4QixJQUFJO1FBQy9CLE1BQU0yQyxhQUFhLElBQUlGLElBQUk7ZUFBSUQ7U0FBTSxDQUFDakUsTUFBTSxDQUFDcEIsQ0FBQUEsTUFBT3VGLE1BQU1FLEdBQUcsQ0FBQ3pGO1FBQzlELE1BQU0wRixnQkFBZ0JGLFdBQVdHLElBQUksR0FBRzlGLEtBQUsrRixHQUFHLENBQUNQLE1BQU1NLElBQUksRUFBRUosTUFBTUksSUFBSTtRQUV2RSx1QkFBdUI7UUFDdkIsTUFBTUUsa0JBQWtCLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUMxQixLQUFLOUUsS0FBSyxFQUFFK0UsS0FBSy9FLEtBQUs7UUFFcEUsT0FBUW9HLGdCQUFnQixNQUFNRyxrQkFBa0I7SUFDbEQ7SUFFQSxzQkFBc0I7SUFDZEMsaUJBQWlCQyxJQUFZLEVBQUVDLElBQVksRUFBVTtRQUMzRCxNQUFNQyxTQUFTRixLQUFLN0MsV0FBVyxHQUFHL0IsS0FBSyxDQUFDO1FBQ3hDLE1BQU0rRSxTQUFTRixLQUFLOUMsV0FBVyxHQUFHL0IsS0FBSyxDQUFDO1FBQ3hDLE1BQU1nRixjQUFjRixPQUFPN0UsTUFBTSxDQUFDa0MsQ0FBQUEsT0FBUTRDLE9BQU9wRCxRQUFRLENBQUNRO1FBQzFELE9BQU82QyxZQUFZNUUsTUFBTSxHQUFHMUIsS0FBSytGLEdBQUcsQ0FBQ0ssT0FBTzFFLE1BQU0sRUFBRTJFLE9BQU8zRSxNQUFNO0lBQ25FO0lBRUEsV0FBVztJQUNId0Msc0JBQXNCSyxJQUFrQixFQUFFQyxJQUFrQixFQUFVO1FBQzVFLE1BQU1nQixRQUFRLElBQUlDLElBQUlsQixLQUFLdkIsSUFBSTtRQUMvQixNQUFNMEMsUUFBUSxJQUFJRCxJQUFJakIsS0FBS3hCLElBQUk7UUFDL0IsTUFBTTJDLGFBQWE7ZUFBSUg7U0FBTSxDQUFDakUsTUFBTSxDQUFDcEIsQ0FBQUEsTUFBT3VGLE1BQU1FLEdBQUcsQ0FBQ3pGO1FBRXRELElBQUl3RixXQUFXMUMsUUFBUSxDQUFDLFVBQVUwQyxXQUFXMUMsUUFBUSxDQUFDLE9BQU87WUFDM0QsT0FBTztRQUNUO1FBQ0EsSUFBSTBDLFdBQVcxQyxRQUFRLENBQUMsU0FBUzBDLFdBQVcxQyxRQUFRLENBQUMsT0FBTztZQUMxRCxPQUFPO1FBQ1Q7UUFDQSxJQUFJMEMsV0FBVzFDLFFBQVEsQ0FBQyxXQUFXMEMsV0FBVzFDLFFBQVEsQ0FBQyxPQUFPO1lBQzVELE9BQU87UUFDVDtRQUVBLE9BQU87SUFDVDtJQWpYQXNELFlBQVlDLE1BQWUsQ0FBRTthQUZyQkEsU0FBd0I7UUFHOUIsSUFBSSxDQUFDQSxNQUFNLEdBQUdBLFVBQVU7SUFDMUI7QUFnWEY7QUFFQSxXQUFXO0FBQ0osTUFBTUMsWUFBWSxJQUFJbkgsWUFBVyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvbGliL2FpLXNlcnZpY2UudHM/ZmRlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IERvY3VtZW50SW5mbyB9IGZyb20gJ21kc2hhcmUtY29yZSdcblxuZXhwb3J0IGludGVyZmFjZSBBSVRhZ1N1Z2dlc3Rpb24ge1xuICB0YWc6IHN0cmluZ1xuICBjb25maWRlbmNlOiBudW1iZXJcbiAgcmVhc29uOiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudEFJQW5hbHlzaXMge1xuICBhaUZyaWVuZGxpbmVzc1Njb3JlOiBudW1iZXJcbiAgc3VnZ2VzdGVkVGFnczogQUlUYWdTdWdnZXN0aW9uW11cbiAgcmVsYXRpb25zaGlwczogQXJyYXk8e1xuICAgIHRhcmdldDogc3RyaW5nXG4gICAgcmVsYXRpb25zaGlwOiBzdHJpbmdcbiAgICBzdHJlbmd0aDogbnVtYmVyXG4gIH0+XG4gIGltcHJvdmVtZW50czogc3RyaW5nW11cbiAgdG9waWNzOiBzdHJpbmdbXVxuICBzZW50aW1lbnQ6ICdwb3NpdGl2ZScgfCAnbmV1dHJhbCcgfCAnbmVnYXRpdmUnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQUlTZWFyY2hSZXN1bHQgZXh0ZW5kcyBEb2N1bWVudEluZm8ge1xuICByZWxldmFuY2VTY29yZTogbnVtYmVyXG4gIG1hdGNoZWRUZXJtczogc3RyaW5nW11cbn1cblxuZXhwb3J0IGNsYXNzIEFJU2VydmljZSB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXG4gIGNvbnN0cnVjdG9yKGFwaUtleT86IHN0cmluZykge1xuICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5IHx8IG51bGxcbiAgfVxuXG4gIC8vIOyekOuPmSDtg5zqt7gg7IOd7ISxIChNb2NrIOq1rO2YhClcbiAgYXN5bmMgZ2VuZXJhdGVUYWdzKGNvbnRlbnQ6IHN0cmluZywgdGl0bGU6IHN0cmluZyk6IFByb21pc2U8QUlUYWdTdWdnZXN0aW9uW10+IHtcbiAgICAvLyDsi6TsoJzroZzripQgT3BlbkFJIEFQSeulvCDsgqzsmqntlZjsp4Drp4wsIOyXrOq4sOyEnOuKlCBNb2NrIOq1rO2YhFxuICAgIGNvbnN0IG1vY2tUYWdzOiBBSVRhZ1N1Z2dlc3Rpb25bXSA9IFtdXG5cbiAgICAvLyDtgqTsm4zrk5wg6riw67CYIO2DnOq3uCDsg53shLFcbiAgICBjb25zdCBrZXl3b3JkcyA9IHRoaXMuZXh0cmFjdEtleXdvcmRzKGNvbnRlbnQgKyAnICcgKyB0aXRsZSlcbiAgICBcbiAgICBrZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xuICAgICAgY29uc3QgY29uZmlkZW5jZSA9IE1hdGgucmFuZG9tKCkgKiAwLjQgKyAwLjYgLy8gMC42LTEuMFxuICAgICAgbW9ja1RhZ3MucHVzaCh7XG4gICAgICAgIHRhZzoga2V5d29yZCxcbiAgICAgICAgY29uZmlkZW5jZSxcbiAgICAgICAgcmVhc29uOiBg66y47ISc7JeQ7IScIFwiJHtrZXl3b3JkfVwiIO2CpOybjOuTnOqwgCDsnpDso7wg7IKs7Jqp65CoYFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8g7Lm07YWM6rOg66asIOq4sOuwmCDtg5zqt7gg7IOd7ISxXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHRoaXMuZGV0ZWN0Q2F0ZWdvcmllcyhjb250ZW50KVxuICAgIGNhdGVnb3JpZXMuZm9yRWFjaChjYXRlZ29yeSA9PiB7XG4gICAgICBtb2NrVGFncy5wdXNoKHtcbiAgICAgICAgdGFnOiBjYXRlZ29yeSxcbiAgICAgICAgY29uZmlkZW5jZTogTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuNyxcbiAgICAgICAgcmVhc29uOiBg66y47IScIOuCtOyaqeydtCBcIiR7Y2F0ZWdvcnl9XCIg7Lm07YWM6rOg66as7JeQIO2VtOuLue2VqGBcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHJldHVybiBtb2NrVGFncy5zb3J0KChhLCBiKSA9PiBiLmNvbmZpZGVuY2UgLSBhLmNvbmZpZGVuY2UpXG4gIH1cblxuICAvLyDsnZjrr7jroaDsoIEg6rKA7IOJIChNb2NrIOq1rO2YhClcbiAgYXN5bmMgc2VtYW50aWNTZWFyY2gocXVlcnk6IHN0cmluZywgZG9jdW1lbnRzOiBEb2N1bWVudEluZm9bXSk6IFByb21pc2U8QUlTZWFyY2hSZXN1bHRbXT4ge1xuICAgIGNvbnN0IHJlc3VsdHM6IEFJU2VhcmNoUmVzdWx0W10gPSBbXVxuXG4gICAgZG9jdW1lbnRzLmZvckVhY2goZG9jID0+IHtcbiAgICAgIGNvbnN0IHJlbGV2YW5jZVNjb3JlID0gdGhpcy5jYWxjdWxhdGVSZWxldmFuY2UocXVlcnksIGRvYylcbiAgICAgIGlmIChyZWxldmFuY2VTY29yZSA+IDAuMSkge1xuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIC4uLmRvYyxcbiAgICAgICAgICByZWxldmFuY2VTY29yZSxcbiAgICAgICAgICBtYXRjaGVkVGVybXM6IHRoaXMuZmluZE1hdGNoZWRUZXJtcyhxdWVyeSwgZG9jKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBiLnJlbGV2YW5jZVNjb3JlIC0gYS5yZWxldmFuY2VTY29yZSlcbiAgfVxuXG4gIC8vIOusuOyEnCDsmpTslb0g7IOd7ISxXG4gIGFzeW5jIGdlbmVyYXRlU3VtbWFyeShjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIE1vY2sg6rWs7ZiEIC0g7Iuk7KCc66Gc64qUIEFJIEFQSSDsgqzsmqlcbiAgICBjb25zdCBzZW50ZW5jZXMgPSBjb250ZW50LnNwbGl0KC9bLiE/XSsvKS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAxMClcbiAgICBjb25zdCBzdW1tYXJ5ID0gc2VudGVuY2VzLnNsaWNlKDAsIDIpLmpvaW4oJy4gJylcbiAgICByZXR1cm4gc3VtbWFyeSArIChzZW50ZW5jZXMubGVuZ3RoID4gMiA/ICcuLi4nIDogJycpXG4gIH1cblxuICAvLyDsooXtlansoIHsnbgg66y47IScIEFJIOu2hOyEnVxuICBhc3luYyBhbmFseXplRG9jdW1lbnQoZG9jdW1lbnQ6IERvY3VtZW50SW5mbywgYWxsRG9jdW1lbnRzOiBEb2N1bWVudEluZm9bXSk6IFByb21pc2U8RG9jdW1lbnRBSUFuYWx5c2lzPiB7XG4gICAgY29uc3QgY29udGVudCA9IGAke2RvY3VtZW50LnRpdGxlfSAke2RvY3VtZW50LmRlc2NyaXB0aW9ufWBcbiAgICBcbiAgICAvLyBBSSDsuZztmZTrj4Qg7Y+J6rCAXG4gICAgY29uc3QgYWlGcmllbmRsaW5lc3NTY29yZSA9IGF3YWl0IHRoaXMuZXZhbHVhdGVBSUZyaWVuZGxpbmVzcyhkb2N1bWVudClcbiAgICBcbiAgICAvLyDsnpDrj5kg7YOc6re4IOyDneyEsVxuICAgIGNvbnN0IHN1Z2dlc3RlZFRhZ3MgPSBhd2FpdCB0aGlzLmdlbmVyYXRlVGFncyhjb250ZW50LCBkb2N1bWVudC50aXRsZSlcbiAgICBcbiAgICAvLyDrrLjshJwg6rSA6rOEIOu2hOyEnVxuICAgIGNvbnN0IHJlbGF0aW9uc2hpcHMgPSBhd2FpdCB0aGlzLmFuYWx5emVEb2N1bWVudFJlbGF0aW9uc2hpcHMoZG9jdW1lbnQsIGFsbERvY3VtZW50cylcbiAgICBcbiAgICAvLyDso7zsoJwg7LaU7LacXG4gICAgY29uc3QgdG9waWNzID0gYXdhaXQgdGhpcy5leHRyYWN0VG9waWNzKGNvbnRlbnQpXG4gICAgXG4gICAgLy8g6rCQ7KCVIOu2hOyEnVxuICAgIGNvbnN0IHNlbnRpbWVudCA9IGF3YWl0IHRoaXMuYW5hbHl6ZVNlbnRpbWVudChjb250ZW50KVxuICAgIFxuICAgIC8vIOqwnOyEoCDsoJzslYgg7IOd7ISxXG4gICAgY29uc3QgaW1wcm92ZW1lbnRzID0gYXdhaXQgdGhpcy5nZW5lcmF0ZUltcHJvdmVtZW50cyhkb2N1bWVudCwgYWlGcmllbmRsaW5lc3NTY29yZSwgc3VnZ2VzdGVkVGFncylcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWlGcmllbmRsaW5lc3NTY29yZSxcbiAgICAgIHN1Z2dlc3RlZFRhZ3MsXG4gICAgICByZWxhdGlvbnNoaXBzLFxuICAgICAgaW1wcm92ZW1lbnRzLFxuICAgICAgdG9waWNzLFxuICAgICAgc2VudGltZW50XG4gICAgfVxuICB9XG5cbiAgLy8gQUkg7Lmc7ZmU64+EIO2PieqwgFxuICBhc3luYyBldmFsdWF0ZUFJRnJpZW5kbGluZXNzKGRvY3VtZW50OiBEb2N1bWVudEluZm8pOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGxldCBzY29yZSA9IDBcblxuICAgIC8vIEZyb250bWF0dGVyIOyZhOyEseuPhCAoMzDsoJApXG4gICAgaWYgKGRvY3VtZW50Lm1ldGFkYXRhPy5hdXRob3IpIHNjb3JlICs9IDEwXG4gICAgaWYgKGRvY3VtZW50LnRhZ3MgJiYgZG9jdW1lbnQudGFncy5sZW5ndGggPiAwKSBzY29yZSArPSAxMFxuICAgIGlmIChkb2N1bWVudC5kZXNjcmlwdGlvbiAmJiBkb2N1bWVudC5kZXNjcmlwdGlvbi5sZW5ndGggPiAxMCkgc2NvcmUgKz0gMTBcblxuICAgIC8vIOq1rOyhsO2ZlCDsiJjspIAgKDMw7KCQKVxuICAgIGlmIChkb2N1bWVudC50aXRsZSAmJiBkb2N1bWVudC50aXRsZS5sZW5ndGggPiA1KSBzY29yZSArPSAxNVxuICAgIGlmIChkb2N1bWVudC5kZXNjcmlwdGlvbiAmJiBkb2N1bWVudC5kZXNjcmlwdGlvbi5pbmNsdWRlcygnLicpKSBzY29yZSArPSAxNVxuXG4gICAgLy8g64K07JqpIOuqhe2ZleyEsSAoMjDsoJApXG4gICAgaWYgKGRvY3VtZW50LmRlc2NyaXB0aW9uICYmIGRvY3VtZW50LmRlc2NyaXB0aW9uLmxlbmd0aCA+IDUwKSBzY29yZSArPSAxMFxuICAgIGlmIChkb2N1bWVudC5tZXRhZGF0YT8ud29yZENvdW50ICYmIGRvY3VtZW50Lm1ldGFkYXRhLndvcmRDb3VudCA+IDEwMCkgc2NvcmUgKz0gMTBcblxuICAgIC8vIO2DnOq3uCDrsI8g6rSA6rOEICgyMOygkClcbiAgICBpZiAoZG9jdW1lbnQudGFncyAmJiBkb2N1bWVudC50YWdzLmxlbmd0aCA+PSAzKSBzY29yZSArPSAxMFxuICAgIGlmIChkb2N1bWVudC50YWdzICYmIGRvY3VtZW50LnRhZ3MubGVuZ3RoID49IDUpIHNjb3JlICs9IDEwXG5cbiAgICByZXR1cm4gTWF0aC5taW4oc2NvcmUsIDEwMClcbiAgfVxuXG4gIC8vIOyjvOygnCDstpTstpxcbiAgYXN5bmMgZXh0cmFjdFRvcGljcyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgdG9waWNzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgdGV4dCA9IGNvbnRlbnQudG9Mb3dlckNhc2UoKVxuXG4gICAgLy8g6riw7IigIOyjvOygnFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdyZWFjdCcpIHx8IHRleHQuaW5jbHVkZXMoJ25leHRqcycpKSB0b3BpY3MucHVzaCgnUmVhY3QvTmV4dC5qcycpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ3R5cGVzY3JpcHQnKSB8fCB0ZXh0LmluY2x1ZGVzKCdqYXZhc2NyaXB0JykpIHRvcGljcy5wdXNoKCdKYXZhU2NyaXB0L1R5cGVTY3JpcHQnKVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdhcGknKSB8fCB0ZXh0LmluY2x1ZGVzKCdyZXN0JykpIHRvcGljcy5wdXNoKCdBUEkg6rCc67CcJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnZGF0YWJhc2UnKSB8fCB0ZXh0LmluY2x1ZGVzKCdkYicpKSB0b3BpY3MucHVzaCgn642w7J207YSw67Kg7J207IqkJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygnYWknKSB8fCB0ZXh0LmluY2x1ZGVzKCdtYWNoaW5lIGxlYXJuaW5nJykpIHRvcGljcy5wdXNoKCdBSS9NTCcpXG4gICAgXG4gICAgLy8g64+E66mU7J24IOyjvOygnFxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfshKTsuZgnKSB8fCB0ZXh0LmluY2x1ZGVzKCdzZXR1cCcpKSB0b3BpY3MucHVzaCgn7ZmY6rK9IOyEpOyglScpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+uwsO2PrCcpIHx8IHRleHQuaW5jbHVkZXMoJ2RlcGxveScpKSB0b3BpY3MucHVzaCgn67Cw7Y+sJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygn7YWM7Iqk7Yq4JykgfHwgdGV4dC5pbmNsdWRlcygndGVzdCcpKSB0b3BpY3MucHVzaCgn7YWM7Iqk7YyFJylcbiAgICBpZiAodGV4dC5pbmNsdWRlcygn67O07JWIJykgfHwgdGV4dC5pbmNsdWRlcygnc2VjdXJpdHknKSkgdG9waWNzLnB1c2goJ+uztOyViCcpXG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+yEseuKpScpIHx8IHRleHQuaW5jbHVkZXMoJ3BlcmZvcm1hbmNlJykpIHRvcGljcy5wdXNoKCfshLHriqUg7LWc7KCB7ZmUJylcblxuICAgIHJldHVybiB0b3BpY3Muc2xpY2UoMCwgNSkgLy8g7LWc64yAIDXqsJwg7KO87KCcXG4gIH1cblxuICAvLyDqsJDsoJUg67aE7ISdXG4gIGFzeW5jIGFuYWx5emVTZW50aW1lbnQoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTwncG9zaXRpdmUnIHwgJ25ldXRyYWwnIHwgJ25lZ2F0aXZlJz4ge1xuICAgIGNvbnN0IHRleHQgPSBjb250ZW50LnRvTG93ZXJDYXNlKClcbiAgICBcbiAgICBjb25zdCBwb3NpdGl2ZVdvcmRzID0gWyfsoovri6QnLCAn7ZuM66WtJywgJ+yZhOuyvScsICfshLHqs7UnLCAn7Zqo6rO87KCBJywgJ+yJveuLpCcsICfruaDrpbTri6QnLCAn7JWI7KCV7KCBJ11cbiAgICBjb25zdCBuZWdhdGl2ZVdvcmRzID0gWyfrrLjsoJwnLCAn7Jik66WYJywgJ+yLpO2MqCcsICfslrTroLXri6QnLCAn64qQ66as64ukJywgJ+u2iOyViOyglScsICfrs7XsnqEnXVxuICAgIFxuICAgIGNvbnN0IHBvc2l0aXZlQ291bnQgPSBwb3NpdGl2ZVdvcmRzLmZpbHRlcih3b3JkID0+IHRleHQuaW5jbHVkZXMod29yZCkpLmxlbmd0aFxuICAgIGNvbnN0IG5lZ2F0aXZlQ291bnQgPSBuZWdhdGl2ZVdvcmRzLmZpbHRlcih3b3JkID0+IHRleHQuaW5jbHVkZXMod29yZCkpLmxlbmd0aFxuICAgIFxuICAgIGlmIChwb3NpdGl2ZUNvdW50ID4gbmVnYXRpdmVDb3VudCkgcmV0dXJuICdwb3NpdGl2ZSdcbiAgICBpZiAobmVnYXRpdmVDb3VudCA+IHBvc2l0aXZlQ291bnQpIHJldHVybiAnbmVnYXRpdmUnXG4gICAgcmV0dXJuICduZXV0cmFsJ1xuICB9XG5cbiAgLy8g6rCc7ISgIOygnOyViCDsg53shLFcbiAgYXN5bmMgZ2VuZXJhdGVJbXByb3ZlbWVudHMoXG4gICAgZG9jdW1lbnQ6IERvY3VtZW50SW5mbywgXG4gICAgYWlTY29yZTogbnVtYmVyLCBcbiAgICBzdWdnZXN0ZWRUYWdzOiBBSVRhZ1N1Z2dlc3Rpb25bXVxuICApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgY29uc3QgaW1wcm92ZW1lbnRzOiBzdHJpbmdbXSA9IFtdXG5cbiAgICBpZiAoYWlTY29yZSA8IDcwKSB7XG4gICAgICBpZiAoIWRvY3VtZW50Lm1ldGFkYXRhPy5hdXRob3IpIHtcbiAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ+yekeyEseyekCDsoJXrs7Trpbwg7LaU6rCA7ZWY7JesIOyLoOuisOyEseydhCDrhpLsnbTshLjsmpQnKVxuICAgICAgfVxuICAgICAgaWYgKCFkb2N1bWVudC50YWdzIHx8IGRvY3VtZW50LnRhZ3MubGVuZ3RoIDwgMykge1xuICAgICAgICBpbXByb3ZlbWVudHMucHVzaCgn642UIOunjuydgCDtg5zqt7jrpbwg7LaU6rCA7ZWY7JesIOqygOyDiSDqsIDriqXshLHsnYQg64aS7J207IS47JqUJylcbiAgICAgIH1cbiAgICAgIGlmICghZG9jdW1lbnQuZGVzY3JpcHRpb24gfHwgZG9jdW1lbnQuZGVzY3JpcHRpb24ubGVuZ3RoIDwgNTApIHtcbiAgICAgICAgaW1wcm92ZW1lbnRzLnB1c2goJ+usuOyEnCDshKTrqoXsnYQg642UIOyekOyEuO2eiCDsnpHshLHtlZjsl6wg7J207ZW064+E66W8IOuGkuydtOyEuOyalCcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1Z2dlc3RlZFRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgaW1wcm92ZW1lbnRzLnB1c2goYCR7c3VnZ2VzdGVkVGFncy5sZW5ndGh96rCc7J2YIEFJIOy2lOyynCDtg5zqt7jrpbwg7KCB7Jqp7ZW067O07IS47JqUYClcbiAgICB9XG5cbiAgICBpZiAoZG9jdW1lbnQubWV0YWRhdGE/LndvcmRDb3VudCAmJiBkb2N1bWVudC5tZXRhZGF0YS53b3JkQ291bnQgPCAxMDApIHtcbiAgICAgIGltcHJvdmVtZW50cy5wdXNoKCfrrLjshJwg64K07Jqp7J2EIOuNlCDtko3rtoDtlZjqsowg7J6R7ISx7ZW067O07IS47JqUJylcbiAgICB9XG5cbiAgICBpZiAoIWRvY3VtZW50LmRlc2NyaXB0aW9uIHx8ICFkb2N1bWVudC5kZXNjcmlwdGlvbi5pbmNsdWRlcygnLicpKSB7XG4gICAgICBpbXByb3ZlbWVudHMucHVzaCgn66y47IScIOyEpOuqheyXkCDsmYTsoITtlZwg66y47J6l7J2EIOyCrOyaqe2VtOuztOyEuOyalCcpXG4gICAgfVxuXG4gICAgcmV0dXJuIGltcHJvdmVtZW50cy5zbGljZSgwLCA0KSAvLyDstZzrjIAgNOqwnCDsoJzslYhcbiAgfVxuXG4gIC8vIOusuOyEnCDqtIDqs4Qg67aE7ISdICjqsJzrs4Qg66y47ISc7JqpKVxuICBhc3luYyBhbmFseXplRG9jdW1lbnRSZWxhdGlvbnNoaXBzKGRvY3VtZW50OiBEb2N1bWVudEluZm8sIGFsbERvY3VtZW50czogRG9jdW1lbnRJbmZvW10pOiBQcm9taXNlPEFycmF5PHtcbiAgICB0YXJnZXQ6IHN0cmluZ1xuICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gICAgc3RyZW5ndGg6IG51bWJlclxuICB9Pj4ge1xuICAgIGNvbnN0IHJlbGF0aW9uc2hpcHM6IEFycmF5PHtcbiAgICAgIHRhcmdldDogc3RyaW5nXG4gICAgICByZWxhdGlvbnNoaXA6IHN0cmluZ1xuICAgICAgc3RyZW5ndGg6IG51bWJlclxuICAgIH0+ID0gW11cblxuICAgIGZvciAoY29uc3Qgb3RoZXJEb2Mgb2YgYWxsRG9jdW1lbnRzKSB7XG4gICAgICBpZiAob3RoZXJEb2MuaWQgPT09IGRvY3VtZW50LmlkKSBjb250aW51ZVxuXG4gICAgICBjb25zdCBzaW1pbGFyaXR5ID0gdGhpcy5jYWxjdWxhdGVTaW1pbGFyaXR5KGRvY3VtZW50LCBvdGhlckRvYylcbiAgICAgIGlmIChzaW1pbGFyaXR5ID4gMC4zKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcHMucHVzaCh7XG4gICAgICAgICAgdGFyZ2V0OiBvdGhlckRvYy50aXRsZSxcbiAgICAgICAgICByZWxhdGlvbnNoaXA6IHRoaXMuZGV0ZXJtaW5lUmVsYXRpb25zaGlwKGRvY3VtZW50LCBvdGhlckRvYyksXG4gICAgICAgICAgc3RyZW5ndGg6IHNpbWlsYXJpdHlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVsYXRpb25zaGlwcy5zbGljZSgwLCAzKSAvLyDstZzrjIAgM+qwnCDqtIDqs4Trp4wg7ZGc7IucXG4gIH1cblxuICAvLyDrrLjshJwg6rSA6rOEIOu2hOyEnSAo7KCE7LK0IOusuOyEnOyaqSlcbiAgYXN5bmMgYW5hbHl6ZUFsbERvY3VtZW50UmVsYXRpb25zaGlwcyhkb2N1bWVudHM6IERvY3VtZW50SW5mb1tdKTogUHJvbWlzZTxBcnJheTx7XG4gICAgc291cmNlOiBzdHJpbmdcbiAgICB0YXJnZXQ6IHN0cmluZ1xuICAgIHJlbGF0aW9uc2hpcDogc3RyaW5nXG4gICAgc3RyZW5ndGg6IG51bWJlclxuICB9Pj4ge1xuICAgIGNvbnN0IHJlbGF0aW9uc2hpcHM6IEFycmF5PHtcbiAgICAgIHNvdXJjZTogc3RyaW5nXG4gICAgICB0YXJnZXQ6IHN0cmluZ1xuICAgICAgcmVsYXRpb25zaGlwOiBzdHJpbmdcbiAgICAgIHN0cmVuZ3RoOiBudW1iZXJcbiAgICB9PiA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgZG9jdW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGRvYzEgPSBkb2N1bWVudHNbaV1cbiAgICAgICAgY29uc3QgZG9jMiA9IGRvY3VtZW50c1tqXVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHRoaXMuY2FsY3VsYXRlU2ltaWxhcml0eShkb2MxLCBkb2MyKVxuICAgICAgICBpZiAoc2ltaWxhcml0eSA+IDAuMykge1xuICAgICAgICAgIHJlbGF0aW9uc2hpcHMucHVzaCh7XG4gICAgICAgICAgICBzb3VyY2U6IGRvYzEudGl0bGUsXG4gICAgICAgICAgICB0YXJnZXQ6IGRvYzIudGl0bGUsXG4gICAgICAgICAgICByZWxhdGlvbnNoaXA6IHRoaXMuZGV0ZXJtaW5lUmVsYXRpb25zaGlwKGRvYzEsIGRvYzIpLFxuICAgICAgICAgICAgc3RyZW5ndGg6IHNpbWlsYXJpdHlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbGF0aW9uc2hpcHNcbiAgfVxuXG4gIC8vIO2CpOybjOuTnCDstpTstpwgKE1vY2spXG4gIHByaXZhdGUgZXh0cmFjdEtleXdvcmRzKHRleHQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQudG9Mb3dlckNhc2UoKVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxz6rCALe2eo10vZywgJyAnKVxuICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgIC5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDIpXG5cbiAgICBjb25zdCB3b3JkQ291bnQgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpXG4gICAgd29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICAgIHdvcmRDb3VudC5zZXQod29yZCwgKHdvcmRDb3VudC5nZXQod29yZCkgfHwgMCkgKyAxKVxuICAgIH0pXG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh3b3JkQ291bnQuZW50cmllcygpKVxuICAgICAgLmZpbHRlcigoW18sIGNvdW50XSkgPT4gY291bnQgPiAxKVxuICAgICAgLnNvcnQoKFssIGFdLCBbLCBiXSkgPT4gYiAtIGEpXG4gICAgICAuc2xpY2UoMCwgNSlcbiAgICAgIC5tYXAoKFt3b3JkLCBfXSkgPT4gd29yZClcbiAgfVxuXG4gIC8vIOy5tO2FjOqzoOumrCDqsJDsp4AgKE1vY2spXG4gIHByaXZhdGUgZGV0ZWN0Q2F0ZWdvcmllcyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgY2F0ZWdvcmllczogc3RyaW5nW10gPSBbXVxuICAgIGNvbnN0IHRleHQgPSBjb250ZW50LnRvTG93ZXJDYXNlKClcblxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCdhcGknKSB8fCB0ZXh0LmluY2x1ZGVzKCdlbmRwb2ludCcpIHx8IHRleHQuaW5jbHVkZXMoJ3Jlc3QnKSkge1xuICAgICAgY2F0ZWdvcmllcy5wdXNoKCdBUEknKVxuICAgIH1cbiAgICBpZiAodGV4dC5pbmNsdWRlcygn7ISk7LmYJykgfHwgdGV4dC5pbmNsdWRlcygnc2V0dXAnKSB8fCB0ZXh0LmluY2x1ZGVzKCftmZjqsr0nKSkge1xuICAgICAgY2F0ZWdvcmllcy5wdXNoKCfshKTsuZgnKVxuICAgIH1cbiAgICBpZiAodGV4dC5pbmNsdWRlcygn66y47IScJykgfHwgdGV4dC5pbmNsdWRlcygnZG9jdW1lbnRhdGlvbicpIHx8IHRleHQuaW5jbHVkZXMoJ+qwgOydtOuTnCcpKSB7XG4gICAgICBjYXRlZ29yaWVzLnB1c2goJ+usuOyEnCcpXG4gICAgfVxuICAgIGlmICh0ZXh0LmluY2x1ZGVzKCftlITroZzsoJ3tirgnKSB8fCB0ZXh0LmluY2x1ZGVzKCdwcm9qZWN0JykgfHwgdGV4dC5pbmNsdWRlcygn6rCc7JqUJykpIHtcbiAgICAgIGNhdGVnb3JpZXMucHVzaCgn7ZSE66Gc7KCd7Yq4JylcbiAgICB9XG4gICAgaWYgKHRleHQuaW5jbHVkZXMoJ+qwnOuwnCcpIHx8IHRleHQuaW5jbHVkZXMoJ2RldmVsb3BtZW50JykgfHwgdGV4dC5pbmNsdWRlcygn7L2U65OcJykpIHtcbiAgICAgIGNhdGVnb3JpZXMucHVzaCgn6rCc67CcJylcbiAgICB9XG5cbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG5cbiAgLy8g6rSA66Co7ISxIOqzhOyCsCAoTW9jaylcbiAgcHJpdmF0ZSBjYWxjdWxhdGVSZWxldmFuY2UocXVlcnk6IHN0cmluZywgZG9jOiBEb2N1bWVudEluZm8pOiBudW1iZXIge1xuICAgIGNvbnN0IHF1ZXJ5VGVybXMgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLylcbiAgICBsZXQgc2NvcmUgPSAwXG5cbiAgICAvLyDsoJzrqqkg66ek7LmtICjrhpLsnYAg6rCA7KSR7LmYKVxuICAgIHF1ZXJ5VGVybXMuZm9yRWFjaCh0ZXJtID0+IHtcbiAgICAgIGlmIChkb2MudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSkge1xuICAgICAgICBzY29yZSArPSAwLjRcbiAgICAgIH1cbiAgICAgIGlmIChkb2MuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSkge1xuICAgICAgICBzY29yZSArPSAwLjJcbiAgICAgIH1cbiAgICAgIGlmIChkb2MudGFncy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSkpIHtcbiAgICAgICAgc2NvcmUgKz0gMC4zXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBNYXRoLm1pbihzY29yZSwgMS4wKVxuICB9XG5cbiAgLy8g66ek7Lmt65CcIOyaqeyWtCDssL7quLBcbiAgcHJpdmF0ZSBmaW5kTWF0Y2hlZFRlcm1zKHF1ZXJ5OiBzdHJpbmcsIGRvYzogRG9jdW1lbnRJbmZvKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHF1ZXJ5VGVybXMgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLylcbiAgICBjb25zdCBtYXRjaGVkVGVybXM6IHN0cmluZ1tdID0gW11cblxuICAgIHF1ZXJ5VGVybXMuZm9yRWFjaCh0ZXJtID0+IHtcbiAgICAgIGlmIChkb2MudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSB8fFxuICAgICAgICAgIGRvYy5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRlcm0pIHx8XG4gICAgICAgICAgZG9jLnRhZ3Muc29tZSh0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpKSB7XG4gICAgICAgIG1hdGNoZWRUZXJtcy5wdXNoKHRlcm0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBtYXRjaGVkVGVybXNcbiAgfVxuXG4gIC8vIOusuOyEnCDsnKDsgqzrj4Qg6rOE7IKwXG4gIHByaXZhdGUgY2FsY3VsYXRlU2ltaWxhcml0eShkb2MxOiBEb2N1bWVudEluZm8sIGRvYzI6IERvY3VtZW50SW5mbyk6IG51bWJlciB7XG4gICAgLy8g7YOc6re4IOycoOyCrOuPhFxuICAgIGNvbnN0IHRhZ3MxID0gbmV3IFNldChkb2MxLnRhZ3MpXG4gICAgY29uc3QgdGFnczIgPSBuZXcgU2V0KGRvYzIudGFncylcbiAgICBjb25zdCBjb21tb25UYWdzID0gbmV3IFNldChbLi4udGFnczFdLmZpbHRlcih0YWcgPT4gdGFnczIuaGFzKHRhZykpKVxuICAgIGNvbnN0IHRhZ1NpbWlsYXJpdHkgPSBjb21tb25UYWdzLnNpemUgLyBNYXRoLm1heCh0YWdzMS5zaXplLCB0YWdzMi5zaXplKVxuXG4gICAgLy8g7KCc66qpIOycoOyCrOuPhCAo6rCE64uo7ZWcIOusuOyekOyXtCDsnKDsgqzrj4QpXG4gICAgY29uc3QgdGl0bGVTaW1pbGFyaXR5ID0gdGhpcy5zdHJpbmdTaW1pbGFyaXR5KGRvYzEudGl0bGUsIGRvYzIudGl0bGUpXG5cbiAgICByZXR1cm4gKHRhZ1NpbWlsYXJpdHkgKiAwLjYgKyB0aXRsZVNpbWlsYXJpdHkgKiAwLjQpXG4gIH1cblxuICAvLyDrrLjsnpDsl7Qg7Jyg7IKs64+EIOqzhOyCsCAo6rCE64uo7ZWcIOq1rO2YhClcbiAgcHJpdmF0ZSBzdHJpbmdTaW1pbGFyaXR5KHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCB3b3JkczEgPSBzdHIxLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKVxuICAgIGNvbnN0IHdvcmRzMiA9IHN0cjIudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzKy8pXG4gICAgY29uc3QgY29tbW9uV29yZHMgPSB3b3JkczEuZmlsdGVyKHdvcmQgPT4gd29yZHMyLmluY2x1ZGVzKHdvcmQpKVxuICAgIHJldHVybiBjb21tb25Xb3Jkcy5sZW5ndGggLyBNYXRoLm1heCh3b3JkczEubGVuZ3RoLCB3b3JkczIubGVuZ3RoKVxuICB9XG5cbiAgLy8g6rSA6rOEIOycoO2YlSDqsrDsoJVcbiAgcHJpdmF0ZSBkZXRlcm1pbmVSZWxhdGlvbnNoaXAoZG9jMTogRG9jdW1lbnRJbmZvLCBkb2MyOiBEb2N1bWVudEluZm8pOiBzdHJpbmcge1xuICAgIGNvbnN0IHRhZ3MxID0gbmV3IFNldChkb2MxLnRhZ3MpXG4gICAgY29uc3QgdGFnczIgPSBuZXcgU2V0KGRvYzIudGFncylcbiAgICBjb25zdCBjb21tb25UYWdzID0gWy4uLnRhZ3MxXS5maWx0ZXIodGFnID0+IHRhZ3MyLmhhcyh0YWcpKVxuXG4gICAgaWYgKGNvbW1vblRhZ3MuaW5jbHVkZXMoJ0FQSScpICYmIGNvbW1vblRhZ3MuaW5jbHVkZXMoJ+usuOyEnCcpKSB7XG4gICAgICByZXR1cm4gJ0FQSSDrrLjshJwg6rSA6rOEJ1xuICAgIH1cbiAgICBpZiAoY29tbW9uVGFncy5pbmNsdWRlcygn7ISk7LmYJykgJiYgY29tbW9uVGFncy5pbmNsdWRlcygn6rCc67CcJykpIHtcbiAgICAgIHJldHVybiAn6rCc67CcIO2ZmOqyvSDqtIDqs4QnXG4gICAgfVxuICAgIGlmIChjb21tb25UYWdzLmluY2x1ZGVzKCftlITroZzsoJ3tirgnKSAmJiBjb21tb25UYWdzLmluY2x1ZGVzKCfrrLjshJwnKSkge1xuICAgICAgcmV0dXJuICftlITroZzsoJ3tirgg66y47IScIOq0gOqzhCdcbiAgICB9XG5cbiAgICByZXR1cm4gJ+q0gOugqCDrrLjshJwnXG4gIH1cbn1cblxuLy8g7Iux6riA7YakIOyduOyKpO2EtOyKpFxuZXhwb3J0IGNvbnN0IGFpU2VydmljZSA9IG5ldyBBSVNlcnZpY2UoKVxuIl0sIm5hbWVzIjpbIkFJU2VydmljZSIsImdlbmVyYXRlVGFncyIsImNvbnRlbnQiLCJ0aXRsZSIsIm1vY2tUYWdzIiwia2V5d29yZHMiLCJleHRyYWN0S2V5d29yZHMiLCJmb3JFYWNoIiwia2V5d29yZCIsImNvbmZpZGVuY2UiLCJNYXRoIiwicmFuZG9tIiwicHVzaCIsInRhZyIsInJlYXNvbiIsImNhdGVnb3JpZXMiLCJkZXRlY3RDYXRlZ29yaWVzIiwiY2F0ZWdvcnkiLCJzb3J0IiwiYSIsImIiLCJzZW1hbnRpY1NlYXJjaCIsInF1ZXJ5IiwiZG9jdW1lbnRzIiwicmVzdWx0cyIsImRvYyIsInJlbGV2YW5jZVNjb3JlIiwiY2FsY3VsYXRlUmVsZXZhbmNlIiwibWF0Y2hlZFRlcm1zIiwiZmluZE1hdGNoZWRUZXJtcyIsImdlbmVyYXRlU3VtbWFyeSIsInNlbnRlbmNlcyIsInNwbGl0IiwiZmlsdGVyIiwicyIsInRyaW0iLCJsZW5ndGgiLCJzdW1tYXJ5Iiwic2xpY2UiLCJqb2luIiwiYW5hbHl6ZURvY3VtZW50IiwiZG9jdW1lbnQiLCJhbGxEb2N1bWVudHMiLCJkZXNjcmlwdGlvbiIsImFpRnJpZW5kbGluZXNzU2NvcmUiLCJldmFsdWF0ZUFJRnJpZW5kbGluZXNzIiwic3VnZ2VzdGVkVGFncyIsInJlbGF0aW9uc2hpcHMiLCJhbmFseXplRG9jdW1lbnRSZWxhdGlvbnNoaXBzIiwidG9waWNzIiwiZXh0cmFjdFRvcGljcyIsInNlbnRpbWVudCIsImFuYWx5emVTZW50aW1lbnQiLCJpbXByb3ZlbWVudHMiLCJnZW5lcmF0ZUltcHJvdmVtZW50cyIsInNjb3JlIiwibWV0YWRhdGEiLCJhdXRob3IiLCJ0YWdzIiwiaW5jbHVkZXMiLCJ3b3JkQ291bnQiLCJtaW4iLCJ0ZXh0IiwidG9Mb3dlckNhc2UiLCJwb3NpdGl2ZVdvcmRzIiwibmVnYXRpdmVXb3JkcyIsInBvc2l0aXZlQ291bnQiLCJ3b3JkIiwibmVnYXRpdmVDb3VudCIsImFpU2NvcmUiLCJvdGhlckRvYyIsImlkIiwic2ltaWxhcml0eSIsImNhbGN1bGF0ZVNpbWlsYXJpdHkiLCJ0YXJnZXQiLCJyZWxhdGlvbnNoaXAiLCJkZXRlcm1pbmVSZWxhdGlvbnNoaXAiLCJzdHJlbmd0aCIsImFuYWx5emVBbGxEb2N1bWVudFJlbGF0aW9uc2hpcHMiLCJpIiwiaiIsImRvYzEiLCJkb2MyIiwic291cmNlIiwid29yZHMiLCJyZXBsYWNlIiwiTWFwIiwic2V0IiwiZ2V0IiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsIl8iLCJjb3VudCIsIm1hcCIsInF1ZXJ5VGVybXMiLCJ0ZXJtIiwic29tZSIsInRhZ3MxIiwiU2V0IiwidGFnczIiLCJjb21tb25UYWdzIiwiaGFzIiwidGFnU2ltaWxhcml0eSIsInNpemUiLCJtYXgiLCJ0aXRsZVNpbWlsYXJpdHkiLCJzdHJpbmdTaW1pbGFyaXR5Iiwic3RyMSIsInN0cjIiLCJ3b3JkczEiLCJ3b3JkczIiLCJjb21tb25Xb3JkcyIsImNvbnN0cnVjdG9yIiwiYXBpS2V5IiwiYWlTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/ai-service.ts\n"));

/***/ })

});